<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: character_funcs Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespacecharacter__funcs.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">character_funcs Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcharacter__funcs_1_1comfort__response__t.html">comfort_response_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a8614d6647ae110ba51944af26b80ecb7"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7">comfort_level</a> { <br />
&#160;&#160;<a class="el" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a79a2520f22b9e1526ff93176029603b8">impossible</a> = -999
, <a class="el" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7ac19a5c3628d86633a40e23c78d4ff67d">uncomfortable</a> = -7
, <a class="el" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a5da248ea6840aca1ae2b417b17982a89">neutral</a> = 0
, <a class="el" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a1493fbda00a5e67f5f6d8d619489a6af">slightly_comfortable</a> = 3
, <br />
&#160;&#160;<a class="el" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7aff52b9c1eee2349b5099deb92b8307ed">comfortable</a> = 5
, <a class="el" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a2d02b60eaa3c25912ee2e3ba0b669068">very_comfortable</a> = 10
<br />
 }</td></tr>
<tr class="separator:a8614d6647ae110ba51944af26b80ecb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a470b862a6936cbfbd1e80a46b78f1914"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a470b862a6936cbfbd1e80a46b78f1914">estimate_effect_dur</a> (int skill_lvl, const <a class="el" href="type__id_8h.html#acc8305d21e9a186d196c8ff88ba2cf19">efftype_id</a> &amp;<a class="el" href="classeffect.html">effect</a>, const <a class="el" href="classtime__duration.html">time_duration</a> &amp;error_magnitude, int threshold, const <a class="el" href="classCreature.html">Creature</a> &amp;target)</td></tr>
<tr class="memdesc:a470b862a6936cbfbd1e80a46b78f1914"><td class="mdescLeft">&#160;</td><td class="mdescRight">Estimate effect duration based on relevant skill.  <a href="namespacecharacter__funcs.html#a470b862a6936cbfbd1e80a46b78f1914">More...</a><br /></td></tr>
<tr class="separator:a470b862a6936cbfbd1e80a46b78f1914"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaa760a90e1a9cc452c7b756bcde2a60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#adaa760a90e1a9cc452c7b756bcde2a60">siphon</a> (<a class="el" href="classCharacter.html">Character</a> &amp;ch, <a class="el" href="classvehicle.html">vehicle</a> &amp;veh, const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;desired_liquid)</td></tr>
<tr class="memdesc:adaa760a90e1a9cc452c7b756bcde2a60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Siphons fuel (if available) from the specified vehicle into container or similar via game::handle_liquid.  <a href="namespacecharacter__funcs.html#adaa760a90e1a9cc452c7b756bcde2a60">More...</a><br /></td></tr>
<tr class="separator:adaa760a90e1a9cc452c7b756bcde2a60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a862df11441bba358b82fa47ce88ebe85"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a862df11441bba358b82fa47ce88ebe85">is_fun_to_read</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;ch, const <a class="el" href="classitem.html">item</a> &amp;book)</td></tr>
<tr class="memdesc:a862df11441bba358b82fa47ce88ebe85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns whether character considers it fun to read the book.  <a href="namespacecharacter__funcs.html#a862df11441bba358b82fa47ce88ebe85">More...</a><br /></td></tr>
<tr class="separator:a862df11441bba358b82fa47ce88ebe85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa9f2cc376f03128e0a486a90c7376fa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#aaa9f2cc376f03128e0a486a90c7376fa">get_book_fun_for</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;ch, const <a class="el" href="classitem.html">item</a> &amp;book)</td></tr>
<tr class="memdesc:aaa9f2cc376f03128e0a486a90c7376fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns enjoyability value of a book for given character.  <a href="namespacecharacter__funcs.html#aaa9f2cc376f03128e0a486a90c7376fa">More...</a><br /></td></tr>
<tr class="separator:aaa9f2cc376f03128e0a486a90c7376fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1686a89929a324a03d1396cac6ab1a24"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structcharacter__funcs_1_1comfort__response__t.html">comfort_response_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a1686a89929a324a03d1396cac6ab1a24">base_comfort_value</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;who, const <a class="el" href="structtripoint.html">tripoint</a> &amp;p)</td></tr>
<tr class="memdesc:a1686a89929a324a03d1396cac6ab1a24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rate point's ability to serve as a bed.  <a href="namespacecharacter__funcs.html#a1686a89929a324a03d1396cac6ab1a24">More...</a><br /></td></tr>
<tr class="separator:a1686a89929a324a03d1396cac6ab1a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a392d1b99006a4f1f16c773e38762043d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a392d1b99006a4f1f16c773e38762043d">rate_sleep_spot</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;who, const <a class="el" href="structtripoint.html">tripoint</a> &amp;p)</td></tr>
<tr class="memdesc:a392d1b99006a4f1f16c773e38762043d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rate point's ability to serve as a bed.  <a href="namespacecharacter__funcs.html#a392d1b99006a4f1f16c773e38762043d">More...</a><br /></td></tr>
<tr class="separator:a392d1b99006a4f1f16c773e38762043d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16d62ac71c344a9b0482777456bb7b74"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a16d62ac71c344a9b0482777456bb7b74">roll_can_sleep</a> (<a class="el" href="classCharacter.html">Character</a> &amp;who)</td></tr>
<tr class="memdesc:a16d62ac71c344a9b0482777456bb7b74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checked each turn during "lying_down", returns true if the avatar falls asleep.  <a href="namespacecharacter__funcs.html#a16d62ac71c344a9b0482777456bb7b74">More...</a><br /></td></tr>
<tr class="separator:a16d62ac71c344a9b0482777456bb7b74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dce7cdd9fb67e45d224f22aea0ff920"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a0dce7cdd9fb67e45d224f22aea0ff920">can_interface_armor</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;who)</td></tr>
<tr class="memdesc:a0dce7cdd9fb67e45d224f22aea0ff920"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether character has an active bionic capable of interfacing with power armor.  <a href="namespacecharacter__funcs.html#a0dce7cdd9fb67e45d224f22aea0ff920">More...</a><br /></td></tr>
<tr class="separator:a0dce7cdd9fb67e45d224f22aea0ff920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c63f47142d40af0092a1be132a53efa"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a6c63f47142d40af0092a1be132a53efa">fmt_wielded_weapon</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;who)</td></tr>
<tr class="memdesc:a6c63f47142d40af0092a1be132a53efa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the formatted name of the currently wielded item (if any) with current gun mode (if gun)  <a href="namespacecharacter__funcs.html#a6c63f47142d40af0092a1be132a53efa">More...</a><br /></td></tr>
<tr class="separator:a6c63f47142d40af0092a1be132a53efa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95d2e2c3c197301f7e9c3e4608e912eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a95d2e2c3c197301f7e9c3e4608e912eb">add_pain_msg</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;who, int val, <a class="el" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a> bp)</td></tr>
<tr class="memdesc:a95d2e2c3c197301f7e9c3e4608e912eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add message describing how character feels pain.  <a href="namespacecharacter__funcs.html#a95d2e2c3c197301f7e9c3e4608e912eb">More...</a><br /></td></tr>
<tr class="separator:a95d2e2c3c197301f7e9c3e4608e912eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa9463f9c384d1e193bdbc8dc337f8d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#afa9463f9c384d1e193bdbc8dc337f8d3">update_body_wetness</a> (<a class="el" href="classCharacter.html">Character</a> &amp;who, const <a class="el" href="structw__point.html">w_point</a> &amp;weather)</td></tr>
<tr class="memdesc:afa9463f9c384d1e193bdbc8dc337f8d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maintains body wetness and handles the rate at which the player dries.  <a href="namespacecharacter__funcs.html#afa9463f9c384d1e193bdbc8dc337f8d3">More...</a><br /></td></tr>
<tr class="separator:afa9463f9c384d1e193bdbc8dc337f8d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b6391933c53c0461e4e64fa9930d472"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a8b6391933c53c0461e4e64fa9930d472">do_pause</a> (<a class="el" href="classCharacter.html">Character</a> &amp;who)</td></tr>
<tr class="memdesc:a8b6391933c53c0461e4e64fa9930d472"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do pause action ('.  <a href="namespacecharacter__funcs.html#a8b6391933c53c0461e4e64fa9930d472">More...</a><br /></td></tr>
<tr class="separator:a8b6391933c53c0461e4e64fa9930d472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53b7fa49a536bb361b3a6b2ef669bea4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a53b7fa49a536bb361b3a6b2ef669bea4">search_surroundings</a> (<a class="el" href="classCharacter.html">Character</a> &amp;who)</td></tr>
<tr class="memdesc:a53b7fa49a536bb361b3a6b2ef669bea4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search surrounding squares for traps (and maybe other things in the future).  <a href="namespacecharacter__funcs.html#a53b7fa49a536bb361b3a6b2ef669bea4">More...</a><br /></td></tr>
<tr class="separator:a53b7fa49a536bb361b3a6b2ef669bea4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a641323aa837163a8a245868a5043035a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a641323aa837163a8a245868a5043035a">update_mental_focus</a> (<a class="el" href="classCharacter.html">Character</a> &amp;who)</td></tr>
<tr class="memdesc:a641323aa837163a8a245868a5043035a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses calc_focus_change to update the player's current focus.  <a href="namespacecharacter__funcs.html#a641323aa837163a8a245868a5043035a">More...</a><br /></td></tr>
<tr class="separator:a641323aa837163a8a245868a5043035a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:adda4d5fd10b7216c49a0f9b6010de579"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#adda4d5fd10b7216c49a0f9b6010de579">fine_detail_vision_mod</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;who)</td></tr>
<tr class="memdesc:adda4d5fd10b7216c49a0f9b6010de579"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates multiplier for the time taken to perform tasks that require detail vision (reading, crafting, etc.).  <a href="namespacecharacter__funcs.html#adda4d5fd10b7216c49a0f9b6010de579">More...</a><br /></td></tr>
<tr class="separator:adda4d5fd10b7216c49a0f9b6010de579"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03ea116da570af10c630e0fe3a7ea6fc"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a03ea116da570af10c630e0fe3a7ea6fc">fine_detail_vision_mod</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;who, const <a class="el" href="structtripoint.html">tripoint</a> &amp;p)</td></tr>
<tr class="separator:a03ea116da570af10c630e0fe3a7ea6fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr class="memitem:a813a9decd34980fe53f38ba18ffd6374"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a813a9decd34980fe53f38ba18ffd6374">can_see_fine_details</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;who)</td></tr>
<tr class="memdesc:a813a9decd34980fe53f38ba18ffd6374"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks whether character vision at given pos is good enough to see fine details.  <a href="namespacecharacter__funcs.html#a813a9decd34980fe53f38ba18ffd6374">More...</a><br /></td></tr>
<tr class="separator:a813a9decd34980fe53f38ba18ffd6374"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68c0c236c653e5217f1436bfadd54664"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a68c0c236c653e5217f1436bfadd54664">can_see_fine_details</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;who, const <a class="el" href="structtripoint.html">tripoint</a> &amp;p)</td></tr>
<tr class="separator:a68c0c236c653e5217f1436bfadd54664"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ac767ac632c0c783c8615f5e920cc938e"><td class="memItemLeft" align="right" valign="top">constexpr float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#ac767ac632c0c783c8615f5e920cc938e">FINE_VISION_THRESHOLD</a> = 4.0f</td></tr>
<tr class="memdesc:ac767ac632c0c783c8615f5e920cc938e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Threshold for fine detail vision mod.  <a href="namespacecharacter__funcs.html#ac767ac632c0c783c8615f5e920cc938e">More...</a><br /></td></tr>
<tr class="separator:ac767ac632c0c783c8615f5e920cc938e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e103652bd1f087acad98fa135eca4a4"><td class="memItemLeft" align="right" valign="top">constexpr float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecharacter__funcs.html#a4e103652bd1f087acad98fa135eca4a4">FINE_VISION_PERFECT</a> = 1.0f</td></tr>
<tr class="memdesc:a4e103652bd1f087acad98fa135eca4a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Value for perfect fine detail vision.  <a href="namespacecharacter__funcs.html#a4e103652bd1f087acad98fa135eca4a4">More...</a><br /></td></tr>
<tr class="separator:a4e103652bd1f087acad98fa135eca4a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a8614d6647ae110ba51944af26b80ecb7" name="a8614d6647ae110ba51944af26b80ecb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8614d6647ae110ba51944af26b80ecb7">&#9670;&nbsp;</a></span>comfort_level</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7">character_funcs::comfort_level</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a8614d6647ae110ba51944af26b80ecb7a79a2520f22b9e1526ff93176029603b8" name="a8614d6647ae110ba51944af26b80ecb7a79a2520f22b9e1526ff93176029603b8"></a>impossible&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8614d6647ae110ba51944af26b80ecb7ac19a5c3628d86633a40e23c78d4ff67d" name="a8614d6647ae110ba51944af26b80ecb7ac19a5c3628d86633a40e23c78d4ff67d"></a>uncomfortable&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8614d6647ae110ba51944af26b80ecb7a5da248ea6840aca1ae2b417b17982a89" name="a8614d6647ae110ba51944af26b80ecb7a5da248ea6840aca1ae2b417b17982a89"></a>neutral&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8614d6647ae110ba51944af26b80ecb7a1493fbda00a5e67f5f6d8d619489a6af" name="a8614d6647ae110ba51944af26b80ecb7a1493fbda00a5e67f5f6d8d619489a6af"></a>slightly_comfortable&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8614d6647ae110ba51944af26b80ecb7aff52b9c1eee2349b5099deb92b8307ed" name="a8614d6647ae110ba51944af26b80ecb7aff52b9c1eee2349b5099deb92b8307ed"></a>comfortable&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8614d6647ae110ba51944af26b80ecb7a2d02b60eaa3c25912ee2e3ba0b669068" name="a8614d6647ae110ba51944af26b80ecb7a2d02b60eaa3c25912ee2e3ba0b669068"></a>very_comfortable&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="character__functions_8h_source.html#l00077">77</a> of file <a class="el" href="character__functions_8h_source.html">character_functions.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>                         {</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <a class="code hl_enumvalue" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a79a2520f22b9e1526ff93176029603b8">impossible</a> = -999,</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>    <a class="code hl_enumvalue" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7ac19a5c3628d86633a40e23c78d4ff67d">uncomfortable</a> = -7,</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <a class="code hl_enumvalue" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a5da248ea6840aca1ae2b417b17982a89">neutral</a> = 0,</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    <a class="code hl_enumvalue" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a1493fbda00a5e67f5f6d8d619489a6af">slightly_comfortable</a> = 3,</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <a class="code hl_enumvalue" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7aff52b9c1eee2349b5099deb92b8307ed">comfortable</a> = 5,</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    <a class="code hl_enumvalue" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a2d02b60eaa3c25912ee2e3ba0b669068">very_comfortable</a> = 10</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>};</div>
<div class="ttc" id="anamespacecharacter__funcs_html_a8614d6647ae110ba51944af26b80ecb7a1493fbda00a5e67f5f6d8d619489a6af"><div class="ttname"><a href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a1493fbda00a5e67f5f6d8d619489a6af">character_funcs::comfort_level::slightly_comfortable</a></div><div class="ttdeci">@ slightly_comfortable</div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_a8614d6647ae110ba51944af26b80ecb7a2d02b60eaa3c25912ee2e3ba0b669068"><div class="ttname"><a href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a2d02b60eaa3c25912ee2e3ba0b669068">character_funcs::comfort_level::very_comfortable</a></div><div class="ttdeci">@ very_comfortable</div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_a8614d6647ae110ba51944af26b80ecb7a5da248ea6840aca1ae2b417b17982a89"><div class="ttname"><a href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a5da248ea6840aca1ae2b417b17982a89">character_funcs::comfort_level::neutral</a></div><div class="ttdeci">@ neutral</div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_a8614d6647ae110ba51944af26b80ecb7a79a2520f22b9e1526ff93176029603b8"><div class="ttname"><a href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a79a2520f22b9e1526ff93176029603b8">character_funcs::comfort_level::impossible</a></div><div class="ttdeci">@ impossible</div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_a8614d6647ae110ba51944af26b80ecb7ac19a5c3628d86633a40e23c78d4ff67d"><div class="ttname"><a href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7ac19a5c3628d86633a40e23c78d4ff67d">character_funcs::comfort_level::uncomfortable</a></div><div class="ttdeci">@ uncomfortable</div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_a8614d6647ae110ba51944af26b80ecb7aff52b9c1eee2349b5099deb92b8307ed"><div class="ttname"><a href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7aff52b9c1eee2349b5099deb92b8307ed">character_funcs::comfort_level::comfortable</a></div><div class="ttdeci">@ comfortable</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a95d2e2c3c197301f7e9c3e4608e912eb" name="a95d2e2c3c197301f7e9c3e4608e912eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95d2e2c3c197301f7e9c3e4608e912eb">&#9670;&nbsp;</a></span>add_pain_msg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void character_funcs::add_pain_msg </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a>&#160;</td>
          <td class="paramname"><em>bp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add message describing how character feels pain. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">who</td><td><a class="el" href="classCharacter.html">Character</a> that feels the pain </td></tr>
    <tr><td class="paramname">val</td><td>Amount of pain </td></tr>
    <tr><td class="paramname">bp</td><td>Target body part, use num_bp if no specific body part. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="character__functions_8cpp_source.html#l00432">432</a> of file <a class="el" href="character__functions_8cpp_source.html">character_functions.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>{</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#af20cb84a6e8ccc0ed66c352edf29143b">trait_NOPAIN</a> ) ) {</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>    }</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>    <span class="keywordflow">if</span>( bp == <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a> ) {</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>        <span class="keywordflow">if</span>( val &gt; 20 ) {</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>            who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your body is wracked with excruciating pain!&quot;</span> ) );</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt; 10 ) {</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>            who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your body is wracked with terrible pain!&quot;</span> ) );</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt; 5 ) {</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>            who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your body is wracked with pain!&quot;</span> ) );</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt; 1 ) {</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>            who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your body pains you!&quot;</span> ) );</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>            who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your body aches.&quot;</span> ) );</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>        }</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>        <span class="keywordflow">if</span>( val &gt; 20 ) {</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>            who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s is wracked with excruciating pain!&quot;</span> ),</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>                                   <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( bp ) );</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt; 10 ) {</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>            who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s is wracked with terrible pain!&quot;</span> ),</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>                                   <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( bp ) );</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt; 5 ) {</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>            who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s is wracked with pain!&quot;</span> ),</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>                                   <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( bp ) );</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt; 1 ) {</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>            who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s pains you!&quot;</span> ),</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>                                   <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( bp ) );</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>            who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s aches.&quot;</span> ),</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>                                   <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( bp ) );</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>        }</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>    }</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>}</div>
<div class="ttc" id="abodypart_8cpp_html_ab29c0bad9828b787ace4d04a5e951c6b"><div class="ttname"><a href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a></div><div class="ttdeci">std::string body_part_name_accusative(body_part bp, int number)</div><div class="ttdoc">Returns the matching accusative name of the body_part token, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00329">bodypart.cpp:329</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a></div><div class="ttdeci">@ num_bp</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00053">bodypart.h:52</a></div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_af20cb84a6e8ccc0ed66c352edf29143b"><div class="ttname"><a href="character__functions_8cpp.html#af20cb84a6e8ccc0ed66c352edf29143b">trait_NOPAIN</a></div><div class="ttdeci">static const trait_id trait_NOPAIN(&quot;NOPAIN&quot;)</div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00103">mutation.cpp:103</a></div></div>
<div class="ttc" id="aclassCreature_html_a91dc4715c36eef7d116f944be9a4d435"><div class="ttname"><a href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">Creature::add_msg_if_player</a></div><div class="ttdeci">virtual void add_msg_if_player(const std::string &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00593">creature.h:593</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa829053017e23ef22d44dccecba63a34"><div class="ttname"><a href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a></div><div class="ttdeci">#define _(msg)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00116">translations.h:116</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="bodypart_8cpp_source.html#l00329">body_part_name_accusative()</a>, <a class="el" href="mutation_8cpp_source.html#l00103">Character::has_trait()</a>, <a class="el" href="bodypart_8h_source.html#l00052">num_bp</a>, and <a class="el" href="character__functions_8cpp.html#af20cb84a6e8ccc0ed66c352edf29143b">trait_NOPAIN</a>.</p>

<p class="reference">Referenced by <a class="el" href="character__turn_8cpp_source.html#l00326">Character::process_one_effect()</a>.</p>

</div>
</div>
<a id="a1686a89929a324a03d1396cac6ab1a24" name="a1686a89929a324a03d1396cac6ab1a24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1686a89929a324a03d1396cac6ab1a24">&#9670;&nbsp;</a></span>base_comfort_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structcharacter__funcs_1_1comfort__response__t.html">comfort_response_t</a> character_funcs::base_comfort_value </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rate point's ability to serve as a bed. </p>
<p >Only takes certain mutations into account, and not fatigue nor stimulants. </p>

<p class="definition">Definition at line <a class="el" href="character__functions_8cpp_source.html#l00165">165</a> of file <a class="el" href="character__functions_8cpp_source.html">character_functions.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>{</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    <span class="comment">// Comfort of sleeping spots is &quot;objective&quot;, while sleep_spot( p ) is &quot;subjective&quot;</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <span class="comment">// As in the latter also checks for fatigue and other variables while this function</span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <span class="comment">// only looks at the base comfyness of something. It&#39;s still subjective, in a sense,</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <span class="comment">// as arachnids who sleep in webs will find most places comfortable for instance.</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <span class="keywordtype">int</span> comfort = 0;</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <a class="code hl_struct" href="structcharacter__funcs_1_1comfort__response__t.html">comfort_response_t</a> comfort_response;</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span> </div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    <span class="keywordtype">bool</span> plantsleep = who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#aba25188f1c6479109ff8fb4004f03ebb">trait_CHLOROMORPH</a> );</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    <span class="keywordtype">bool</span> fungaloid_cosplay = who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a039c3379527621f928cbc2e62686108c">trait_M_SKIN3</a> );</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    <span class="keywordtype">bool</span> websleep = who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a0e02f772574a897b72bd8fc3c48e7f3d">trait_WEB_WALKER</a> );</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    <span class="keywordtype">bool</span> webforce = who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#af9f531764978ce897647a8b151bebfef">trait_THRESH_SPIDER</a> ) &amp;&amp; ( who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a81b633e679725d3a23cfed0548dd0a17">trait_WEB_SPINNER</a> ) ||</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>                    ( who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a6d71b37c506e3143c525c4021a580366">trait_WEB_WEAVER</a> ) ) );</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    <span class="keywordtype">bool</span> in_shell = who.<a class="code hl_function" href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">has_active_mutation</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">trait_SHELL2</a> );</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <span class="keywordtype">bool</span> watersleep = who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#abf29a0f9f2b03dbf9baa8dd6af688d41">trait_WATERSLEEP</a> );</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    <span class="keyword">const</span> <a class="code hl_class" href="classoptional__vpart__position.html">optional_vpart_position</a> vp = here.<a class="code hl_function" href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">veh_at</a>( p );</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structmaptile.html">maptile</a> tile = here.<a class="code hl_function" href="classmap.html#a267286ed64b9685c23cf335b2bd225bb">maptile_at</a>( p );</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtrap.html">trap</a> &amp;trap_at_pos = tile.<a class="code hl_function" href="structmaptile.html#ac97edb7a058025aff0f7921d88b92e3a">get_trap_t</a>();</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">ter_id</a> ter_at_pos = tile.<a class="code hl_function" href="structmaptile.html#a9ea19f651f4ce0a70d044fac9caf6f90">get_ter</a>();</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">furn_id</a> furn_at_pos = tile.<a class="code hl_function" href="structmaptile.html#a5c9e3d51ccd6ac8307ed526a0a3c48fb">get_furn</a>();</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span> </div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <span class="keywordtype">int</span> web = here.<a class="code hl_function" href="classmap.html#a34f983a946812fa51de439bd68f6dc09">get_field_intensity</a>( p, <a class="code hl_variable" href="field__type_8cpp.html#afca1ca43633c0fc76d866752559218d4">fd_web</a> );</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span> </div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    <span class="comment">// Some mutants have different comfort needs</span></div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <span class="keywordflow">if</span>( !plantsleep &amp;&amp; !webforce ) {</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>        <span class="keywordflow">if</span>( in_shell ) {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>            comfort += 1 + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::slightly_comfortable );</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>            <span class="comment">// Note: shelled individuals can still use sleeping aids!</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( vp ) {</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>            <span class="keyword">const</span> <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;vpart_reference&gt;</a> carg = vp.<a class="code hl_function" href="classoptional__vpart__position.html#a2f0829fa83c2c4d3007e26b91af11856">part_with_feature</a>( <span class="stringliteral">&quot;CARGO&quot;</span>, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>            <span class="keyword">const</span> <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;vpart_reference&gt;</a> <a class="code hl_function" href="namespacetrapfunc.html#ae7a0f58d463e414463d41d908e7b87ea">board</a> = vp.<a class="code hl_function" href="classoptional__vpart__position.html#a2f0829fa83c2c4d3007e26b91af11856">part_with_feature</a>( <span class="stringliteral">&quot;BOARDABLE&quot;</span>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>            <span class="keywordflow">if</span>( carg ) {</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>                <span class="keyword">const</span> <a class="code hl_class" href="classvehicle__stack.html">vehicle_stack</a> items = vp-&gt;vehicle().get_items( carg-&gt;part_index() );</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>                <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;items_it : items ) {</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>                    <span class="keywordflow">if</span>( items_it.has_flag( <span class="stringliteral">&quot;SLEEP_AID&quot;</span> ) ) {</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>                        <span class="comment">// Note: BED + SLEEP_AID = 9 pts, or 1 pt below very_comfortable</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>                        comfort += 1 + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::slightly_comfortable );</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>                        comfort_response.<a class="code hl_variable" href="structcharacter__funcs_1_1comfort__response__t.html#a884dc3843bf221f63b408da4d979cf23">aid</a> = &amp;items_it;</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>                        <span class="keywordflow">break</span>; <span class="comment">// prevents using more than 1 sleep aid</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>                    }</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>                }</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>            }</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacetrapfunc.html#ae7a0f58d463e414463d41d908e7b87ea">board</a> ) {</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>                comfort += <a class="code hl_function" href="namespacetrapfunc.html#ae7a0f58d463e414463d41d908e7b87ea">board</a>-&gt;info().comfort;</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>                comfort -= here.<a class="code hl_function" href="classmap.html#abe9e7b93cf8ee15c370ad55c3138c4f6">move_cost</a>( p );</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>            }</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>        }</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>        <span class="comment">// Not in a vehicle, start checking furniture/terrain/traps at this point in decreasing order</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( furn_at_pos != <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> ) {</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>            comfort += 0 + furn_at_pos.<a class="code hl_function" href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code hl_variable" href="structfurn__t.html#af40d2527bd923a4829e7077904c53e69">comfort</a>;</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>        }</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>        <span class="comment">// Web sleepers can use their webs if better furniture isn&#39;t available</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>( websleep &amp;&amp; web &gt;= 3 ) {</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>            comfort += 1 + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::slightly_comfortable );</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ter_at_pos == <a class="code hl_variable" href="mapdata_8cpp.html#a2c6e2bf4cee22b3ff74d7e69a18795af">t_improvised_shelter</a> ) {</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>            comfort += 0 + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::slightly_comfortable );</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ter_at_pos == <a class="code hl_variable" href="mapdata_8cpp.html#aa4d82f7bb5458062f399e93bc5c3b275">t_floor</a> || ter_at_pos == <a class="code hl_variable" href="mapdata_8cpp.html#a11826be697fa3ff211d8884a4f558a2e">t_floor_waxed</a> ||</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>                   ter_at_pos == <a class="code hl_variable" href="mapdata_8cpp.html#adbcea8876c02c9f2100b1c2acf437432">t_carpet_red</a> || ter_at_pos == <a class="code hl_variable" href="mapdata_8cpp.html#a90d36c50a0c5ef5e41c897606548d34f">t_carpet_yellow</a> ||</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>                   ter_at_pos == <a class="code hl_variable" href="mapdata_8cpp.html#abc0c2be123f082ee974a6b4163ce76d3">t_carpet_green</a> || ter_at_pos == <a class="code hl_variable" href="mapdata_8cpp.html#a8822ab192d044d0d96828f6f3414a48b">t_carpet_purple</a> ) {</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>            comfort += 1 + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::neutral );</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !trap_at_pos.<a class="code hl_function" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">is_null</a>() ) {</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>            comfort += 0 + trap_at_pos.<a class="code hl_variable" href="structtrap.html#a9e32dc8e92c961fb52b3086421c62b8e">comfort</a>;</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>            <span class="comment">// Not a comfortable sleeping spot</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>            comfort -= here.<a class="code hl_function" href="classmap.html#abe9e7b93cf8ee15c370ad55c3138c4f6">move_cost</a>( p );</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>        }</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span> </div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>        <span class="keywordflow">if</span>( comfort_response.<a class="code hl_variable" href="structcharacter__funcs_1_1comfort__response__t.html#a884dc3843bf221f63b408da4d979cf23">aid</a> == <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>            <span class="keyword">const</span> <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( p );</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;items_it : items ) {</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>                <span class="keywordflow">if</span>( items_it.has_flag( <span class="stringliteral">&quot;SLEEP_AID&quot;</span> ) ) {</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>                    <span class="comment">// Note: BED + SLEEP_AID = 9 pts, or 1 pt below very_comfortable</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>                    comfort += 1 + <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::slightly_comfortable );</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>                    comfort_response.<a class="code hl_variable" href="structcharacter__funcs_1_1comfort__response__t.html#a884dc3843bf221f63b408da4d979cf23">aid</a> = &amp;items_it;</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>                    <span class="keywordflow">break</span>; <span class="comment">// prevents using more than 1 sleep aid</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>                }</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>            }</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>        }</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>        <span class="keywordflow">if</span>( fungaloid_cosplay &amp;&amp; here.<a class="code hl_function" href="classmap.html#a516c0764134cc86b57297811520395f7">has_flag_ter_or_furn</a>( <a class="code hl_function" href="character__functions_8cpp.html#ae002e878ae18d5606ca01aeaa659a44c">flag_FUNGUS</a>, p ) ) {</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>            comfort += <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::very_comfortable );</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( watersleep &amp;&amp; here.<a class="code hl_function" href="classmap.html#af0e872a5d0a7bf1e9745aeb18d3b5e44">has_flag_ter</a>( <a class="code hl_function" href="character__functions_8cpp.html#abe2fc5a03319b12f5fec303eb13687bb">flag_SWIMMABLE</a>, p ) ) {</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>            comfort += <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::very_comfortable );</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>        }</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( plantsleep ) {</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>        <span class="keywordflow">if</span>( vp || furn_at_pos != <a class="code hl_variable" href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a> ) {</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>            <span class="comment">// Sleep ain&#39;t happening in a vehicle or on furniture</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>            comfort = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::impossible );</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>            <span class="comment">// It&#39;s very easy for Chloromorphs to get to sleep on soil!</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>            <span class="keywordflow">if</span>( ter_at_pos == <a class="code hl_variable" href="mapdata_8cpp.html#aa4573ce2c594834a8ced806a5099f3e3">t_dirt</a> || ter_at_pos == <a class="code hl_variable" href="mapdata_8cpp.html#ae6822029506d9cb25c5077dfec866b86">t_pit</a> || ter_at_pos == <a class="code hl_variable" href="mapdata_8cpp.html#af636f3d89f77cfd0ebb47c3d4ecac0c1">t_dirtmound</a> ||</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>                ter_at_pos == <a class="code hl_variable" href="mapdata_8cpp.html#acde4690b771efe403c3c6b972e839df7">t_pit_shallow</a> ) {</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>                comfort += <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::very_comfortable );</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>            }</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>            <span class="comment">// Not as much if you have to dig through stuff first</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ter_at_pos == <a class="code hl_variable" href="mapdata_8cpp.html#a32dc54d9fe56e71bbb905cbb67a782eb">t_grass</a> ) {</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>                comfort += <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::comfortable );</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>            }</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>            <span class="comment">// Sleep ain&#39;t happening</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>                comfort = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::impossible );</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>            }</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>        }</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>        <span class="comment">// Has webforce</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>        <span class="keywordflow">if</span>( web &gt;= 3 ) {</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>            <span class="comment">// Thick Web and you&#39;re good to go</span></div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>            comfort += <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::very_comfortable );</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>            comfort = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::impossible );</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        }</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    }</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span> </div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    <span class="keywordflow">if</span>( comfort &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::comfortable ) ) {</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>        comfort_response.<a class="code hl_variable" href="structcharacter__funcs_1_1comfort__response__t.html#af678f41d1dfcd14b9504c107a946ff14">level</a> = comfort_level::very_comfortable;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( comfort &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::slightly_comfortable ) ) {</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>        comfort_response.<a class="code hl_variable" href="structcharacter__funcs_1_1comfort__response__t.html#af678f41d1dfcd14b9504c107a946ff14">level</a> = comfort_level::comfortable;</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( comfort &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::neutral ) ) {</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        comfort_response.<a class="code hl_variable" href="structcharacter__funcs_1_1comfort__response__t.html#af678f41d1dfcd14b9504c107a946ff14">level</a> = comfort_level::slightly_comfortable;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( comfort == <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_level::neutral ) ) {</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>        comfort_response.<a class="code hl_variable" href="structcharacter__funcs_1_1comfort__response__t.html#af678f41d1dfcd14b9504c107a946ff14">level</a> = comfort_level::neutral;</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        comfort_response.<a class="code hl_variable" href="structcharacter__funcs_1_1comfort__response__t.html#af678f41d1dfcd14b9504c107a946ff14">level</a> = comfort_level::uncomfortable;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    }</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>    <span class="keywordflow">return</span> comfort_response;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>}</div>
<div class="ttc" id="acharacter__functions_8cpp_html_a039c3379527621f928cbc2e62686108c"><div class="ttname"><a href="character__functions_8cpp.html#a039c3379527621f928cbc2e62686108c">trait_M_SKIN3</a></div><div class="ttdeci">static const trait_id trait_M_SKIN3(&quot;M_SKIN3&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_a0e02f772574a897b72bd8fc3c48e7f3d"><div class="ttname"><a href="character__functions_8cpp.html#a0e02f772574a897b72bd8fc3c48e7f3d">trait_WEB_WALKER</a></div><div class="ttdeci">static const trait_id trait_WEB_WALKER(&quot;WEB_WALKER&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_a6d71b37c506e3143c525c4021a580366"><div class="ttname"><a href="character__functions_8cpp.html#a6d71b37c506e3143c525c4021a580366">trait_WEB_WEAVER</a></div><div class="ttdeci">static const trait_id trait_WEB_WEAVER(&quot;WEB_WEAVER&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_a81b633e679725d3a23cfed0548dd0a17"><div class="ttname"><a href="character__functions_8cpp.html#a81b633e679725d3a23cfed0548dd0a17">trait_WEB_SPINNER</a></div><div class="ttdeci">static const trait_id trait_WEB_SPINNER(&quot;WEB_SPINNER&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_a930a7d3aa631d14eb81c3f2fa9a6863e"><div class="ttname"><a href="character__functions_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">trait_SHELL2</a></div><div class="ttdeci">static const trait_id trait_SHELL2(&quot;SHELL2&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_aba25188f1c6479109ff8fb4004f03ebb"><div class="ttname"><a href="character__functions_8cpp.html#aba25188f1c6479109ff8fb4004f03ebb">trait_CHLOROMORPH</a></div><div class="ttdeci">static const trait_id trait_CHLOROMORPH(&quot;CHLOROMORPH&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_abe2fc5a03319b12f5fec303eb13687bb"><div class="ttname"><a href="character__functions_8cpp.html#abe2fc5a03319b12f5fec303eb13687bb">flag_SWIMMABLE</a></div><div class="ttdeci">static const std::string flag_SWIMMABLE(&quot;SWIMMABLE&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_abf29a0f9f2b03dbf9baa8dd6af688d41"><div class="ttname"><a href="character__functions_8cpp.html#abf29a0f9f2b03dbf9baa8dd6af688d41">trait_WATERSLEEP</a></div><div class="ttdeci">static const trait_id trait_WATERSLEEP(&quot;WATERSLEEP&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_ae002e878ae18d5606ca01aeaa659a44c"><div class="ttname"><a href="character__functions_8cpp.html#ae002e878ae18d5606ca01aeaa659a44c">flag_FUNGUS</a></div><div class="ttdeci">static const std::string flag_FUNGUS(&quot;FUNGUS&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_af9f531764978ce897647a8b151bebfef"><div class="ttname"><a href="character__functions_8cpp.html#af9f531764978ce897647a8b151bebfef">trait_THRESH_SPIDER</a></div><div class="ttdeci">static const trait_id trait_THRESH_SPIDER(&quot;THRESH_SPIDER&quot;)</div></div>
<div class="ttc" id="aclassCharacter_html_a225de862f8875f9ff96ec8a303213404"><div class="ttname"><a href="classCharacter.html#a225de862f8875f9ff96ec8a303213404">Character::has_active_mutation</a></div><div class="ttdeci">bool has_active_mutation(const trait_id &amp;b) const</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00367">mutation.cpp:367</a></div></div>
<div class="ttc" id="aclasscata_1_1optional_html"><div class="ttname"><a href="classcata_1_1optional.html">cata::optional</a></div><div class="ttdef"><b>Definition:</b> <a href="optional_8h_source.html#l00030">optional.h:31</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id&lt; ter_t &gt;</a></div></div>
<div class="ttc" id="aclassint__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classint__id.html#a4796245d3cd6e0283670698a98d46ae9">int_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00026">ammo_effect.cpp:26</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00176">item.h:177</a></div></div>
<div class="ttc" id="aclassmap__stack_html"><div class="ttname"><a href="classmap__stack.html">map_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00104">map.h:105</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00383">map.h:384</a></div></div>
<div class="ttc" id="aclassmap_html_a267286ed64b9685c23cf335b2bd225bb"><div class="ttname"><a href="classmap.html#a267286ed64b9685c23cf335b2bd225bb">map::maptile_at</a></div><div class="ttdeci">maptile maptile_at(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00201">map.cpp:201</a></div></div>
<div class="ttc" id="aclassmap_html_a34f983a946812fa51de439bd68f6dc09"><div class="ttname"><a href="classmap.html#a34f983a946812fa51de439bd68f6dc09">map::get_field_intensity</a></div><div class="ttdeci">int get_field_intensity(const tripoint &amp;p, const field_type_id &amp;type) const</div><div class="ttdoc">Get the intensity of a field entry (field_entry::intensity), if there is no field of that type,...</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05381">map.cpp:5381</a></div></div>
<div class="ttc" id="aclassmap_html_a5130a127601b67e569eaef37a1a88610"><div class="ttname"><a href="classmap.html#a5130a127601b67e569eaef37a1a88610">map::i_at</a></div><div class="ttdeci">map_stack i_at(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04090">map.cpp:4090</a></div></div>
<div class="ttc" id="aclassmap_html_a516c0764134cc86b57297811520395f7"><div class="ttname"><a href="classmap.html#a516c0764134cc86b57297811520395f7">map::has_flag_ter_or_furn</a></div><div class="ttdeci">bool has_flag_ter_or_furn(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02322">map.cpp:2322</a></div></div>
<div class="ttc" id="aclassmap_html_aa487d96256c3d35db7a1bf273156b64a"><div class="ttname"><a href="classmap.html#aa487d96256c3d35db7a1bf273156b64a">map::veh_at</a></div><div class="ttdeci">optional_vpart_position veh_at(const tripoint &amp;p) const</div><div class="ttdoc">Checks if tile is occupied by vehicle and by which part.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01009">map.cpp:1009</a></div></div>
<div class="ttc" id="aclassmap_html_abe9e7b93cf8ee15c370ad55c3138c4f6"><div class="ttname"><a href="classmap.html#abe9e7b93cf8ee15c370ad55c3138c4f6">map::move_cost</a></div><div class="ttdeci">int move_cost(const tripoint &amp;p, const vehicle *ignored_vehicle=nullptr) const</div><div class="ttdoc">Calculate the cost to move past the tile at p.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l01780">map.cpp:1780</a></div></div>
<div class="ttc" id="aclassmap_html_af0e872a5d0a7bf1e9745aeb18d3b5e44"><div class="ttname"><a href="classmap.html#af0e872a5d0a7bf1e9745aeb18d3b5e44">map::has_flag_ter</a></div><div class="ttdeci">bool has_flag_ter(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02312">map.cpp:2312</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html"><div class="ttname"><a href="classoptional__vpart__position.html">optional_vpart_position</a></div><div class="ttdoc">Simple wrapper to forward functions that may return a cata::optional to vpart_position.</div><div class="ttdef"><b>Definition:</b> <a href="vpart__position_8h_source.html#l00103">vpart_position.h:104</a></div></div>
<div class="ttc" id="aclassoptional__vpart__position_html_a2f0829fa83c2c4d3007e26b91af11856"><div class="ttname"><a href="classoptional__vpart__position.html#a2f0829fa83c2c4d3007e26b91af11856">optional_vpart_position::part_with_feature</a></div><div class="ttdeci">cata::optional&lt; vpart_reference &gt; part_with_feature(const std::string &amp;f, bool unbroken) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l02481">vehicle.cpp:2481</a></div></div>
<div class="ttc" id="aclassvehicle__stack_html"><div class="ttname"><a href="classvehicle__stack.html">vehicle_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00122">vehicle.h:123</a></div></div>
<div class="ttc" id="afield__type_8cpp_html_afca1ca43633c0fc76d866752559218d4"><div class="ttname"><a href="field__type_8cpp.html#afca1ca43633c0fc76d866752559218d4">fd_web</a></div><div class="ttdeci">field_type_id fd_web</div><div class="ttdef"><b>Definition:</b> <a href="field__type_8cpp_source.html#l00340">field_type.cpp:340</a></div></div>
<div class="ttc" id="amap_8cpp_html_acb0b34be6e497bdd2f9f40ae6929d562"><div class="ttname"><a href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00146">map.cpp:146</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a11826be697fa3ff211d8884a4f558a2e"><div class="ttname"><a href="mapdata_8cpp.html#a11826be697fa3ff211d8884a4f558a2e">t_floor_waxed</a></div><div class="ttdeci">ter_id t_floor_waxed</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00634">mapdata.cpp:634</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a2c6e2bf4cee22b3ff74d7e69a18795af"><div class="ttname"><a href="mapdata_8cpp.html#a2c6e2bf4cee22b3ff74d7e69a18795af">t_improvised_shelter</a></div><div class="ttdeci">ter_id t_improvised_shelter</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00718">mapdata.cpp:718</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a32dc54d9fe56e71bbb905cbb67a782eb"><div class="ttname"><a href="mapdata_8cpp.html#a32dc54d9fe56e71bbb905cbb67a782eb">t_grass</a></div><div class="ttdeci">ter_id t_grass</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00630">mapdata.cpp:630</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a8822ab192d044d0d96828f6f3414a48b"><div class="ttname"><a href="mapdata_8cpp.html#a8822ab192d044d0d96828f6f3414a48b">t_carpet_purple</a></div><div class="ttdeci">ter_id t_carpet_purple</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00636">mapdata.cpp:636</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a90d36c50a0c5ef5e41c897606548d34f"><div class="ttname"><a href="mapdata_8cpp.html#a90d36c50a0c5ef5e41c897606548d34f">t_carpet_yellow</a></div><div class="ttdeci">ter_id t_carpet_yellow</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00636">mapdata.cpp:636</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_a98423a935af4b918d68f206e63f6cf7f"><div class="ttname"><a href="mapdata_8cpp.html#a98423a935af4b918d68f206e63f6cf7f">f_null</a></div><div class="ttdeci">furn_id f_null</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l01097">mapdata.cpp:1097</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_aa4573ce2c594834a8ced806a5099f3e3"><div class="ttname"><a href="mapdata_8cpp.html#aa4573ce2c594834a8ced806a5099f3e3">t_dirt</a></div><div class="ttdeci">ter_id t_dirt</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00627">mapdata.cpp:627</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_aa4d82f7bb5458062f399e93bc5c3b275"><div class="ttname"><a href="mapdata_8cpp.html#aa4d82f7bb5458062f399e93bc5c3b275">t_floor</a></div><div class="ttdeci">ter_id t_floor</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00634">mapdata.cpp:634</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_abc0c2be123f082ee974a6b4163ce76d3"><div class="ttname"><a href="mapdata_8cpp.html#abc0c2be123f082ee974a6b4163ce76d3">t_carpet_green</a></div><div class="ttdeci">ter_id t_carpet_green</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00636">mapdata.cpp:636</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_acde4690b771efe403c3c6b972e839df7"><div class="ttname"><a href="mapdata_8cpp.html#acde4690b771efe403c3c6b972e839df7">t_pit_shallow</a></div><div class="ttdeci">ter_id t_pit_shallow</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00627">mapdata.cpp:627</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_adbcea8876c02c9f2100b1c2acf437432"><div class="ttname"><a href="mapdata_8cpp.html#adbcea8876c02c9f2100b1c2acf437432">t_carpet_red</a></div><div class="ttdeci">ter_id t_carpet_red</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00636">mapdata.cpp:636</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_ae6822029506d9cb25c5077dfec866b86"><div class="ttname"><a href="mapdata_8cpp.html#ae6822029506d9cb25c5077dfec866b86">t_pit</a></div><div class="ttdeci">ter_id t_pit</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00627">mapdata.cpp:627</a></div></div>
<div class="ttc" id="amapdata_8cpp_html_af636f3d89f77cfd0ebb47c3d4ecac0c1"><div class="ttname"><a href="mapdata_8cpp.html#af636f3d89f77cfd0ebb47c3d4ecac0c1">t_dirtmound</a></div><div class="ttdeci">ter_id t_dirtmound</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8cpp_source.html#l00627">mapdata.cpp:627</a></div></div>
<div class="ttc" id="anamespacetrapfunc_html_ae7a0f58d463e414463d41d908e7b87ea"><div class="ttname"><a href="namespacetrapfunc.html#ae7a0f58d463e414463d41d908e7b87ea">trapfunc::board</a></div><div class="ttdeci">bool board(const tripoint &amp;p, Creature *c, item *i)</div><div class="ttdef"><b>Definition:</b> <a href="trapfunc_8cpp_source.html#l00172">trapfunc.cpp:172</a></div></div>
<div class="ttc" id="astructcharacter__funcs_1_1comfort__response__t_html"><div class="ttname"><a href="structcharacter__funcs_1_1comfort__response__t.html">character_funcs::comfort_response_t</a></div><div class="ttdef"><b>Definition:</b> <a href="character__functions_8h_source.html#l00086">character_functions.h:86</a></div></div>
<div class="ttc" id="astructcharacter__funcs_1_1comfort__response__t_html_a884dc3843bf221f63b408da4d979cf23"><div class="ttname"><a href="structcharacter__funcs_1_1comfort__response__t.html#a884dc3843bf221f63b408da4d979cf23">character_funcs::comfort_response_t::aid</a></div><div class="ttdeci">const item * aid</div><div class="ttdef"><b>Definition:</b> <a href="character__functions_8h_source.html#l00088">character_functions.h:88</a></div></div>
<div class="ttc" id="astructcharacter__funcs_1_1comfort__response__t_html_af678f41d1dfcd14b9504c107a946ff14"><div class="ttname"><a href="structcharacter__funcs_1_1comfort__response__t.html#af678f41d1dfcd14b9504c107a946ff14">character_funcs::comfort_response_t::level</a></div><div class="ttdeci">comfort_level level</div><div class="ttdef"><b>Definition:</b> <a href="character__functions_8h_source.html#l00087">character_functions.h:87</a></div></div>
<div class="ttc" id="astructfurn__t_html_af40d2527bd923a4829e7077904c53e69"><div class="ttname"><a href="structfurn__t.html#af40d2527bd923a4829e7077904c53e69">furn_t::comfort</a></div><div class="ttdeci">int comfort</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00507">mapdata.h:507</a></div></div>
<div class="ttc" id="astructmaptile_html"><div class="ttname"><a href="structmaptile.html">maptile</a></div><div class="ttdoc">A wrapper for a submap point.</div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00267">submap.h:267</a></div></div>
<div class="ttc" id="astructmaptile_html_a5c9e3d51ccd6ac8307ed526a0a3c48fb"><div class="ttname"><a href="structmaptile.html#a5c9e3d51ccd6ac8307ed526a0a3c48fb">maptile::get_furn</a></div><div class="ttdeci">furn_id get_furn() const</div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00285">submap.h:285</a></div></div>
<div class="ttc" id="astructmaptile_html_a9ea19f651f4ce0a70d044fac9caf6f90"><div class="ttname"><a href="structmaptile.html#a9ea19f651f4ce0a70d044fac9caf6f90">maptile::get_ter</a></div><div class="ttdeci">ter_id get_ter() const</div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00289">submap.h:289</a></div></div>
<div class="ttc" id="astructmaptile_html_ac97edb7a058025aff0f7921d88b92e3a"><div class="ttname"><a href="structmaptile.html#ac97edb7a058025aff0f7921d88b92e3a">maptile::get_trap_t</a></div><div class="ttdeci">const trap &amp; get_trap_t() const</div><div class="ttdef"><b>Definition:</b> <a href="submap_8h_source.html#l00293">submap.h:293</a></div></div>
<div class="ttc" id="astructtrap_html"><div class="ttname"><a href="structtrap.html">trap</a></div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00086">trap.h:86</a></div></div>
<div class="ttc" id="astructtrap_html_a6a9ac96c5c81eb31093e049ffeac8b4f"><div class="ttname"><a href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">trap::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Whether this is the null-traps, aka no trap at all.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00245">trap.cpp:245</a></div></div>
<div class="ttc" id="astructtrap_html_a9e32dc8e92c961fb52b3086421c62b8e"><div class="ttname"><a href="structtrap.html#a9e32dc8e92c961fb52b3086421c62b8e">trap::comfort</a></div><div class="ttdeci">int comfort</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00119">trap.h:119</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character__functions_8h_source.html#l00088">character_funcs::comfort_response_t::aid</a>, <a class="el" href="trapfunc_8cpp_source.html#l00172">trapfunc::board()</a>, <a class="el" href="mapdata_8h_source.html#l00507">furn_t::comfort</a>, <a class="el" href="trap_8h_source.html#l00119">trap::comfort</a>, <a class="el" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7aff52b9c1eee2349b5099deb92b8307ed">comfortable</a>, <a class="el" href="mapdata_8cpp_source.html#l01097">f_null</a>, <a class="el" href="field__type_8cpp_source.html#l00340">fd_web</a>, <a class="el" href="character__functions_8cpp.html#ae002e878ae18d5606ca01aeaa659a44c">flag_FUNGUS()</a>, <a class="el" href="character__functions_8cpp.html#abe2fc5a03319b12f5fec303eb13687bb">flag_SWIMMABLE()</a>, <a class="el" href="map_8cpp_source.html#l05381">map::get_field_intensity()</a>, <a class="el" href="submap_8h_source.html#l00285">maptile::get_furn()</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="submap_8h_source.html#l00289">maptile::get_ter()</a>, <a class="el" href="submap_8h_source.html#l00293">maptile::get_trap_t()</a>, <a class="el" href="mutation_8cpp_source.html#l00367">Character::has_active_mutation()</a>, <a class="el" href="map_8cpp_source.html#l02312">map::has_flag_ter()</a>, <a class="el" href="map_8cpp_source.html#l02322">map::has_flag_ter_or_furn()</a>, <a class="el" href="mutation_8cpp_source.html#l00103">Character::has_trait()</a>, <a class="el" href="map_8cpp_source.html#l04090">map::i_at()</a>, <a class="el" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a79a2520f22b9e1526ff93176029603b8">impossible</a>, <a class="el" href="trap_8cpp_source.html#l00245">trap::is_null()</a>, <a class="el" href="character__functions_8h_source.html#l00087">character_funcs::comfort_response_t::level</a>, <a class="el" href="map_8cpp_source.html#l00201">map::maptile_at()</a>, <a class="el" href="map_8cpp_source.html#l01780">map::move_cost()</a>, <a class="el" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a5da248ea6840aca1ae2b417b17982a89">neutral</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00026">int_id&lt; T &gt;::obj()</a>, <a class="el" href="vehicle_8cpp_source.html#l02481">optional_vpart_position::part_with_feature()</a>, <a class="el" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a1493fbda00a5e67f5f6d8d619489a6af">slightly_comfortable</a>, <a class="el" href="mapdata_8cpp_source.html#l00636">t_carpet_green</a>, <a class="el" href="mapdata_8cpp_source.html#l00636">t_carpet_purple</a>, <a class="el" href="mapdata_8cpp_source.html#l00636">t_carpet_red</a>, <a class="el" href="mapdata_8cpp_source.html#l00636">t_carpet_yellow</a>, <a class="el" href="mapdata_8cpp_source.html#l00627">t_dirt</a>, <a class="el" href="mapdata_8cpp_source.html#l00627">t_dirtmound</a>, <a class="el" href="mapdata_8cpp_source.html#l00634">t_floor</a>, <a class="el" href="mapdata_8cpp_source.html#l00634">t_floor_waxed</a>, <a class="el" href="mapdata_8cpp_source.html#l00630">t_grass</a>, <a class="el" href="mapdata_8cpp_source.html#l00718">t_improvised_shelter</a>, <a class="el" href="mapdata_8cpp_source.html#l00627">t_pit</a>, <a class="el" href="mapdata_8cpp_source.html#l00627">t_pit_shallow</a>, <a class="el" href="character__functions_8cpp.html#aba25188f1c6479109ff8fb4004f03ebb">trait_CHLOROMORPH</a>, <a class="el" href="character__functions_8cpp.html#a039c3379527621f928cbc2e62686108c">trait_M_SKIN3</a>, <a class="el" href="character__functions_8cpp.html#a930a7d3aa631d14eb81c3f2fa9a6863e">trait_SHELL2</a>, <a class="el" href="character__functions_8cpp.html#af9f531764978ce897647a8b151bebfef">trait_THRESH_SPIDER</a>, <a class="el" href="character__functions_8cpp.html#abf29a0f9f2b03dbf9baa8dd6af688d41">trait_WATERSLEEP</a>, <a class="el" href="character__functions_8cpp.html#a81b633e679725d3a23cfed0548dd0a17">trait_WEB_SPINNER</a>, <a class="el" href="character__functions_8cpp.html#a0e02f772574a897b72bd8fc3c48e7f3d">trait_WEB_WALKER</a>, <a class="el" href="character__functions_8cpp.html#a6d71b37c506e3143c525c4021a580366">trait_WEB_WEAVER</a>, <a class="el" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7ac19a5c3628d86633a40e23c78d4ff67d">uncomfortable</a>, <a class="el" href="map_8cpp_source.html#l01009">map::veh_at()</a>, and <a class="el" href="namespacecharacter__funcs.html#a8614d6647ae110ba51944af26b80ecb7a2d02b60eaa3c25912ee2e3ba0b669068">very_comfortable</a>.</p>

<p class="reference">Referenced by <a class="el" href="character__functions_8cpp_source.html#l00296">rate_sleep_spot()</a>, and <a class="el" href="character_8cpp_source.html#l04788">Character::update_needs()</a>.</p>

</div>
</div>
<a id="a0dce7cdd9fb67e45d224f22aea0ff920" name="a0dce7cdd9fb67e45d224f22aea0ff920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dce7cdd9fb67e45d224f22aea0ff920">&#9670;&nbsp;</a></span>can_interface_armor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool character_funcs::can_interface_armor </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether character has an active bionic capable of interfacing with power armor. </p>

<p class="definition">Definition at line <a class="el" href="character__functions_8cpp_source.html#l00384">384</a> of file <a class="el" href="character__functions_8cpp_source.html">character_functions.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>{</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    <span class="keywordtype">bool</span> okay = std::any_of( who.<a class="code hl_variable" href="classCharacter.html#a388bca3ef975bd265c67df45bb280bee">my_bionics</a>-&gt;begin(), who.<a class="code hl_variable" href="classCharacter.html#a388bca3ef975bd265c67df45bb280bee">my_bionics</a>-&gt;end(),</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>    []( <span class="keyword">const</span> <a class="code hl_struct" href="structbionic.html">bionic</a> &amp; <a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a> ) {</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>        return b.powered &amp;&amp; b.info().has_flag( STATIC( flag_str_id( <span class="stringliteral">&quot;BIONIC_ARMOR_INTERFACE&quot;</span> ) ) );</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    } );</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>    <span class="keywordflow">return</span> okay;</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>}</div>
<div class="ttc" id="aclassCharacter_html_a388bca3ef975bd265c67df45bb280bee"><div class="ttname"><a href="classCharacter.html#a388bca3ef975bd265c67df45bb280bee">Character::my_bionics</a></div><div class="ttdeci">pimpl&lt; bionic_collection &gt; my_bionics</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01556">character.h:1556</a></div></div>
<div class="ttc" id="amagic_8cpp_html_aa93a189fb7bbbf87be54bcc7bd11bb6f"><div class="ttname"><a href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a></div><div class="ttdeci">constexpr double b</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01031">magic.cpp:1031</a></div></div>
<div class="ttc" id="astructbionic_html"><div class="ttname"><a href="structbionic.html">bionic</a></div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00149">bionics.h:149</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01031">b</a>, and <a class="el" href="character_8h_source.html#l01556">Character::my_bionics</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l07428">Character::consume_charges()</a>, <a class="el" href="character_8cpp_source.html#l07373">Character::has_enough_charges()</a>, <a class="el" href="item_8cpp_source.html#l09344">item::process_tool()</a>, <a class="el" href="item_8cpp_source.html#l07866">item::units_remaining()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l00212">iuse_transform::use()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l00914">set_transform_iuse::use()</a>.</p>

</div>
</div>
<a id="a813a9decd34980fe53f38ba18ffd6374" name="a813a9decd34980fe53f38ba18ffd6374"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a813a9decd34980fe53f38ba18ffd6374">&#9670;&nbsp;</a></span>can_see_fine_details() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool character_funcs::can_see_fine_details </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks whether character vision at given pos is good enough to see fine details. </p>
<p >Fine vision is required for some interactions (reading, crafting, etc.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">who</td><td><a class="el" href="classCharacter.html">Character</a> to check for </td></tr>
    <tr><td class="paramname">pos</td><td>Check remote spot as if the character were standing there </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="character__functions_8cpp_source.html#l00155">155</a> of file <a class="el" href="character__functions_8cpp_source.html">character_functions.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>{</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecharacter__funcs.html#a68c0c236c653e5217f1436bfadd54664">can_see_fine_details</a>( who, who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() );</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>}</div>
<div class="ttc" id="aclassCharacter_html_ad24859164517ed6e392e21df69527199"><div class="ttname"><a href="classCharacter.html#ad24859164517ed6e392e21df69527199">Character::pos</a></div><div class="ttdeci">const tripoint &amp; pos() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00721">character.cpp:721</a></div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_a68c0c236c653e5217f1436bfadd54664"><div class="ttname"><a href="namespacecharacter__funcs.html#a68c0c236c653e5217f1436bfadd54664">character_funcs::can_see_fine_details</a></div><div class="ttdeci">bool can_see_fine_details(const Character &amp;who, const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="character__functions_8cpp_source.html#l00160">character_functions.cpp:160</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character__functions_8cpp_source.html#l00155">can_see_fine_details()</a>, and <a class="el" href="character_8cpp_source.html#l00721">Character::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l08112">butcher_submenu()</a>, <a class="el" href="npc_8cpp_source.html#l00839">npc::can_read()</a>, <a class="el" href="character__functions_8cpp_source.html#l00155">can_see_fine_details()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l03029">repair_item_actor::can_use_tool()</a>, <a class="el" href="veh__interact_8cpp_source.html#l00538">veh_interact::cant_do()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l02950">generic_multi_activity_handler()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l02518">generic_multi_activity_locations()</a>, <a class="el" href="avatar_8cpp_source.html#l00255">avatar::get_book_reader()</a>, <a class="el" href="crafting_8cpp_source.html#l00131">lighting_crafting_speed_multiplier()</a>, <a class="el" href="construction_8cpp_source.html#l00944">player_can_see_to_build()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l04793">activity_handlers::study_spell_do_turn()</a>, <a class="el" href="iexamine_8cpp_source.html#l03814">iexamine::trap()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l01342">reveal_map_actor::use()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l04720">sew_advanced_actor::use()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l02477">learn_spell_actor::use()</a>, <a class="el" href="iuse_8cpp_source.html#l09433">iuse::wash_all_items()</a>, <a class="el" href="iuse_8cpp_source.html#l09412">iuse::wash_hard_items()</a>, and <a class="el" href="iuse_8cpp_source.html#l09391">iuse::wash_soft_items()</a>.</p>

</div>
</div>
<a id="a68c0c236c653e5217f1436bfadd54664" name="a68c0c236c653e5217f1436bfadd54664"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68c0c236c653e5217f1436bfadd54664">&#9670;&nbsp;</a></span>can_see_fine_details() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool character_funcs::can_see_fine_details </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="character__functions_8cpp_source.html#l00160">160</a> of file <a class="el" href="character__functions_8cpp_source.html">character_functions.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>{</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecharacter__funcs.html#a03ea116da570af10c630e0fe3a7ea6fc">fine_detail_vision_mod</a>( who, p ) &lt;= <a class="code hl_variable" href="namespacecharacter__funcs.html#ac767ac632c0c783c8615f5e920cc938e">FINE_VISION_THRESHOLD</a>;</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>}</div>
<div class="ttc" id="anamespacecharacter__funcs_html_a03ea116da570af10c630e0fe3a7ea6fc"><div class="ttname"><a href="namespacecharacter__funcs.html#a03ea116da570af10c630e0fe3a7ea6fc">character_funcs::fine_detail_vision_mod</a></div><div class="ttdeci">float fine_detail_vision_mod(const Character &amp;who, const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="character__functions_8cpp_source.html#l00134">character_functions.cpp:134</a></div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_ac767ac632c0c783c8615f5e920cc938e"><div class="ttname"><a href="namespacecharacter__funcs.html#ac767ac632c0c783c8615f5e920cc938e">character_funcs::FINE_VISION_THRESHOLD</a></div><div class="ttdeci">constexpr float FINE_VISION_THRESHOLD</div><div class="ttdoc">Threshold for fine detail vision mod.</div><div class="ttdef"><b>Definition:</b> <a href="character__functions_8h_source.html#l00037">character_functions.h:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character__functions_8cpp_source.html#l00129">fine_detail_vision_mod()</a>, and <a class="el" href="character__functions_8h_source.html#l00037">FINE_VISION_THRESHOLD</a>.</p>

</div>
</div>
<a id="a8b6391933c53c0461e4e64fa9930d472" name="a8b6391933c53c0461e4e64fa9930d472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b6391933c53c0461e4e64fa9930d472">&#9670;&nbsp;</a></span>do_pause()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void character_funcs::do_pause </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do pause action ('. </p>
<p >' key). </p>

<p class="definition">Definition at line <a class="el" href="character__turn_8cpp_source.html#l00967">967</a> of file <a class="el" href="character__turn_8cpp_source.html">character_turn.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>{</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span> </div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>    who.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> = 0;</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>    who.<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = <a class="code hl_variable" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a>;</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span> </div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>    <span class="comment">// Train swimming if underwater</span></div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>    <span class="keywordflow">if</span>( !who.<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>        <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() ) {</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>            who.<a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>()-&gt;<a class="code hl_function" href="classplayer.html#aa57c61de29a5e410c100aee07798b9b1">practice</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a1d815a8053cfecc8a05374bf92924ba2">skill_swimming</a>, 1 );</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>            who.<a class="code hl_function" href="classCharacter.html#a44dbe53874421147bfc4491d8753cccc">drench</a>( 100, { {</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>                    <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8">bp_leg_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16">bp_leg_r</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a441080ba1d3930d38f635658d9b28e01">bp_arm_l</a>,</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>                    <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ae5f21c7494ad730a0c6abf6957976cb3">bp_arm_r</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698">bp_head</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980abb7b120eb8dc7c137110446fe541baed">bp_mouth</a>,</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>                    <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb">bp_foot_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7">bp_foot_r</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2806629e65a2c2eb5d8049e29e77910e">bp_hand_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a54721306a0e05318b6d0440349c1a0fb">bp_hand_r</a></div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>                }</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>            }, true );</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258aeb9fcbd752ad2c632ccc4383c5641b69">TFLAG_DEEP_WATER</a>, who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) ) {</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>            who.<a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>()-&gt;<a class="code hl_function" href="classplayer.html#aa57c61de29a5e410c100aee07798b9b1">practice</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a1d815a8053cfecc8a05374bf92924ba2">skill_swimming</a>, 1 );</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>            <span class="comment">// Same as above, except no head/eyes/mouth</span></div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>            who.<a class="code hl_function" href="classCharacter.html#a44dbe53874421147bfc4491d8753cccc">drench</a>( 100, { {</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>                    <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8">bp_leg_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16">bp_leg_r</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a441080ba1d3930d38f635658d9b28e01">bp_arm_l</a>,</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>                    <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ae5f21c7494ad730a0c6abf6957976cb3">bp_arm_r</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb">bp_foot_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7">bp_foot_r</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2806629e65a2c2eb5d8049e29e77910e">bp_hand_l</a>,</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>                    <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a54721306a0e05318b6d0440349c1a0fb">bp_hand_r</a></div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>                }</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>            }, true );</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <span class="stringliteral">&quot;SWIMMABLE&quot;</span>, who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) ) {</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>            who.<a class="code hl_function" href="classCharacter.html#a44dbe53874421147bfc4491d8753cccc">drench</a>( 40, { { <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb">bp_foot_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7">bp_foot_r</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8">bp_leg_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16">bp_leg_r</a> } }, false );</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>        }</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>    }</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span> </div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>    <span class="comment">// Try to put out clothing/hair fire</span></div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a> ) ) {</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>        <a class="code hl_class" href="classtime__duration.html">time_duration</a> total_removed = 0_turns;</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>        <a class="code hl_class" href="classtime__duration.html">time_duration</a> total_left = 0_turns;</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>        <span class="keywordtype">bool</span> on_ground = who.<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a> );</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_enumeration" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a> bp : <a class="code hl_variable" href="bodypart_8h.html#a089a199d69623f528a3883672f0a084e">all_body_parts</a> ) {</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>            <a class="code hl_class" href="classeffect.html">effect</a> &amp;eff = who.<a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a>, bp );</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>            <span class="keywordflow">if</span>( eff.<a class="code hl_function" href="classeffect.html#a39ebd2ec5b2faacde7483e0c07240baa">is_null</a>() ) {</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>            }</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span> </div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>            <span class="comment">// TODO: Tools and skills</span></div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>            total_left += eff.<a class="code hl_function" href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">get_duration</a>();</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>            <span class="comment">// Being on the ground will smother the fire much faster because you can roll</span></div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>            <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> dur_removed = on_ground ? eff.<a class="code hl_function" href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">get_duration</a>() / 2 + 2_turns : 1_turns;</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>            eff.<a class="code hl_function" href="classeffect.html#a118dd88810785bfbb8243af97a37d2ab">mod_duration</a>( -dur_removed );</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>            total_removed += dur_removed;</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>        }</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span> </div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>        <span class="comment">// Don&#39;t drop on the ground when the ground is on fire</span></div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>        <span class="keywordflow">if</span>( total_left &gt; 1_minutes &amp;&amp; !who.<a class="code hl_function" href="classCreature.html#a6a4c43d66f5a8b50a879d78682b00976">is_dangerous_fields</a>( here.<a class="code hl_function" href="classmap.html#a395a729a4b954692cf08d13e1d32f73e">field_at</a>( who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) ) ) {</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>            who.<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>, 2_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a>, 0, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>            who.<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You roll on the ground, trying to smother the fire!&quot;</span> ),</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; rolls on the ground!&quot;</span> ) );</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( total_removed &gt; 0_turns ) {</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>            who.<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You attempt to put out the fire on you!&quot;</span> ),</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; attempts to put out the fire on them!&quot;</span> ) );</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>        }</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>    }</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span> </div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>    <span class="comment">// on-pause effects for martial arts</span></div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>    who.<a class="code hl_variable" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;ma_onpause_effects( who );</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span> </div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">is_npc</a>() ) {</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>        <span class="comment">// The stuff below doesn&#39;t apply to NPCs</span></div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>        <span class="comment">// search_surroundings should eventually do, though</span></div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>    }</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span> </div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>    <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 8 ) ) {</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>        <a class="code hl_typedef" href="map_8h.html#ae705edb5469cf2668ca5bc3297d75ebb">VehicleList</a> vehs = here.<a class="code hl_function" href="classmap.html#ac1c02ce0648fe07137b86c84fc72f5de">get_vehicles</a>();</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>        <a class="code hl_class" href="classvehicle.html">vehicle</a> *veh = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;v : vehs ) {</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>            veh = v.v;</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>            <span class="keywordflow">if</span>( veh &amp;&amp; veh-&gt;<a class="code hl_function" href="classvehicle.html#aec9a1faa6740b681867d48878e37d7bb">is_moving</a>() &amp;&amp; veh-&gt;<a class="code hl_function" href="classvehicle.html#a341515426011486c265d016c35f84de6">player_in_control</a>( who ) ) {</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>                <span class="keywordtype">double</span> exp_temp = 1 + veh-&gt;<a class="code hl_function" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a>() / 400.0_kilogram +</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>                                  std::abs( veh-&gt;<a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> / 3200.0 );</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>                <span class="keywordtype">int</span> experience = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( exp_temp );</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>                <span class="keywordflow">if</span>( exp_temp - experience &gt; 0 &amp;&amp; <a class="code hl_function" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( exp_temp - experience, 1.0 ) ) {</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>                    experience++;</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>                }</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>                who.<a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>()-&gt;<a class="code hl_function" href="classplayer.html#aa57c61de29a5e410c100aee07798b9b1">practice</a>( <a class="code hl_typedef" href="type__id_8h.html#a13f6e54f55e89d7c6cd86da6d0a7e785">skill_id</a>( <span class="stringliteral">&quot;driving&quot;</span> ), experience );</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>            }</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>        }</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>    }</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span> </div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>    <a class="code hl_function" href="namespacecharacter__funcs.html#a53b7fa49a536bb361b3a6b2ef669bea4">search_surroundings</a>( who );</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>    who.<a class="code hl_function" href="classCharacter.html#aab94093235048027d0afad3f6af4e21c">wait_effects</a>();</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>}</div>
<div class="ttc" id="abodypart_8h_html_a089a199d69623f528a3883672f0a084e"><div class="ttname"><a href="bodypart_8h.html#a089a199d69623f528a3883672f0a084e">all_body_parts</a></div><div class="ttdeci">constexpr std::array&lt; body_part, 12 &gt; all_body_parts</div><div class="ttdoc">Contains all valid body_part values in the order they are defined in.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00082">bodypart.h:82</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a></div><div class="ttdeci">body_part</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00039">bodypart.h:39</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb">bp_foot_l</a></div><div class="ttdeci">@ bp_foot_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00050">bodypart.h:50</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16">bp_leg_r</a></div><div class="ttdeci">@ bp_leg_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00049">bodypart.h:49</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a></div><div class="ttdeci">@ bp_eyes</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00042">bodypart.h:42</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a2806629e65a2c2eb5d8049e29e77910e"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2806629e65a2c2eb5d8049e29e77910e">bp_hand_l</a></div><div class="ttdeci">@ bp_hand_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00046">bodypart.h:46</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a441080ba1d3930d38f635658d9b28e01"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a441080ba1d3930d38f635658d9b28e01">bp_arm_l</a></div><div class="ttdeci">@ bp_arm_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00044">bodypart.h:44</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8">bp_leg_l</a></div><div class="ttdeci">@ bp_leg_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00048">bodypart.h:48</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a54721306a0e05318b6d0440349c1a0fb"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a54721306a0e05318b6d0440349c1a0fb">bp_hand_r</a></div><div class="ttdeci">@ bp_hand_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00047">bodypart.h:47</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698">bp_head</a></div><div class="ttdeci">@ bp_head</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00041">bodypart.h:41</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a></div><div class="ttdeci">@ bp_torso</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00040">bodypart.h:40</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980abb7b120eb8dc7c137110446fe541baed"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980abb7b120eb8dc7c137110446fe541baed">bp_mouth</a></div><div class="ttdeci">@ bp_mouth</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00043">bodypart.h:43</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7">bp_foot_r</a></div><div class="ttdeci">@ bp_foot_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00051">bodypart.h:51</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ae5f21c7494ad730a0c6abf6957976cb3"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ae5f21c7494ad730a0c6abf6957976cb3">bp_arm_r</a></div><div class="ttdeci">@ bp_arm_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00045">bodypart.h:45</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a359120c15f92d54a49fec9de7bcb571f"><div class="ttname"><a href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a></div><div class="ttdeci">bool x_in_y(const time_duration &amp;a, const time_duration &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00521">calendar.cpp:521</a></div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a08481f62adb6937636ea44b855311037"><div class="ttname"><a href="character__turn_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a></div><div class="ttdeci">static const efftype_id effect_downed(&quot;downed&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a1d815a8053cfecc8a05374bf92924ba2"><div class="ttname"><a href="character__turn_8cpp.html#a1d815a8053cfecc8a05374bf92924ba2">skill_swimming</a></div><div class="ttdeci">static const skill_id skill_swimming(&quot;swimming&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_afcfa82c36c0dc2d76cd19d622c2b6ab4"><div class="ttname"><a href="character__turn_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a></div><div class="ttdeci">static const efftype_id effect_onfire(&quot;onfire&quot;)</div></div>
<div class="ttc" id="aclassCharacter_html_a057d68671b298012a18f4e289b39935d"><div class="ttname"><a href="classCharacter.html#a057d68671b298012a18f4e289b39935d">Character::recoil</a></div><div class="ttdeci">double recoil</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00592">character.h:592</a></div></div>
<div class="ttc" id="aclassCharacter_html_a313797e99525bfd2a5ead68b7672f168"><div class="ttname"><a href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">Character::martial_arts_data</a></div><div class="ttdeci">pimpl&lt; character_martial_arts &gt; martial_arts_data</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01557">character.h:1557</a></div></div>
<div class="ttc" id="aclassCharacter_html_a44dbe53874421147bfc4491d8753cccc"><div class="ttname"><a href="classCharacter.html#a44dbe53874421147bfc4491d8753cccc">Character::drench</a></div><div class="ttdeci">void drench(int saturation, const body_part_set &amp;flags, bool ignore_waterproof)</div><div class="ttdoc">Drenches the player with water, saturation is the percent gotten wet.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l01757">suffer.cpp:1757</a></div></div>
<div class="ttc" id="aclassCharacter_html_a61bc9422c35b63128532af268e52cb71"><div class="ttname"><a href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">Character::in_vehicle</a></div><div class="ttdeci">bool in_vehicle</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01543">character.h:1543</a></div></div>
<div class="ttc" id="aclassCharacter_html_aab94093235048027d0afad3f6af4e21c"><div class="ttname"><a href="classCharacter.html#aab94093235048027d0afad3f6af4e21c">Character::wait_effects</a></div><div class="ttdeci">void wait_effects()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01641">character.cpp:1641</a></div></div>
<div class="ttc" id="aclassCreature_html_a5a2346f549de9c87e8f2afeec1e71366"><div class="ttname"><a href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">Creature::is_underwater</a></div><div class="ttdeci">virtual bool is_underwater() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00174">creature.cpp:174</a></div></div>
<div class="ttc" id="aclassCreature_html_a666022fd3ed772fa109d273c20e8de55"><div class="ttname"><a href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">Creature::add_effect</a></div><div class="ttdeci">void add_effect(const effect &amp;eff, bool force=false, bool deferred=false)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00985">creature.cpp:985</a></div></div>
<div class="ttc" id="aclassCreature_html_a6a4c43d66f5a8b50a879d78682b00976"><div class="ttname"><a href="classCreature.html#a6a4c43d66f5a8b50a879d78682b00976">Creature::is_dangerous_fields</a></div><div class="ttdeci">bool is_dangerous_fields(const field &amp;fld) const</div><div class="ttdoc">Returns true if there is a field in the field set that is dangerous to us.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00189">creature.cpp:189</a></div></div>
<div class="ttc" id="aclassCreature_html_a6fb79df9315dc2bed6f34d9a2e37da90"><div class="ttname"><a href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, body_part bp=num_bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01184">creature.cpp:1184</a></div></div>
<div class="ttc" id="aclassCreature_html_a7cf71d2bd6c350f2ceda3f1d64046e63"><div class="ttname"><a href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">Creature::add_msg_player_or_npc</a></div><div class="ttdeci">virtual void add_msg_player_or_npc(const std::string &amp;, const std::string &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00677">creature.h:677</a></div></div>
<div class="ttc" id="aclassCreature_html_a89f56544cdbf34297b4c0e62f3350817"><div class="ttname"><a href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">Creature::get_effect</a></div><div class="ttdeci">const effect &amp; get_effect(const efftype_id &amp;eff_id, body_part bp=num_bp) const</div><div class="ttdoc">Return the effect that matches the given arguments exactly.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01224">creature.cpp:1224</a></div></div>
<div class="ttc" id="aclassCreature_html_a8c5a392caa213bee9581b47e9f0e2052"><div class="ttname"><a href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">Creature::moves</a></div><div class="ttdeci">int moves</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00570">creature.h:570</a></div></div>
<div class="ttc" id="aclassCreature_html_acb1d0a1210d3dd4c86350f3ad4c58649"><div class="ttname"><a href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">Creature::as_player</a></div><div class="ttdeci">virtual player * as_player()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00122">creature.h:122</a></div></div>
<div class="ttc" id="aclassCreature_html_aed84fe52e1335d48d53f482f8a278c87"><div class="ttname"><a href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">Creature::is_npc</a></div><div class="ttdeci">virtual bool is_npc() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00098">creature.h:98</a></div></div>
<div class="ttc" id="aclasseffect_html"><div class="ttname"><a href="classeffect.html">effect</a></div><div class="ttdef"><b>Definition:</b> <a href="effect_8h_source.html#l00160">effect.h:161</a></div></div>
<div class="ttc" id="aclasseffect_html_a118dd88810785bfbb8243af97a37d2ab"><div class="ttname"><a href="classeffect.html#a118dd88810785bfbb8243af97a37d2ab">effect::mod_duration</a></div><div class="ttdeci">void mod_duration(const time_duration &amp;dur, bool alert=false)</div><div class="ttdoc">Mods the duration, capping at max_duration if it exists.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00821">effect.cpp:821</a></div></div>
<div class="ttc" id="aclasseffect_html_a34c766f51dc0f89ebdab09c344bb506b"><div class="ttname"><a href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">effect::get_duration</a></div><div class="ttdeci">time_duration get_duration() const</div><div class="ttdoc">Returns the remaining duration of an effect.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00797">effect.cpp:797</a></div></div>
<div class="ttc" id="aclasseffect_html_a39ebd2ec5b2faacde7483e0c07240baa"><div class="ttname"><a href="classeffect.html#a39ebd2ec5b2faacde7483e0c07240baa">effect::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns true if the effect is the result of effect(), ie.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00553">effect.cpp:553</a></div></div>
<div class="ttc" id="aclassmap_html_a27e22f0999ea03eff18babc48643c568"><div class="ttname"><a href="classmap.html#a27e22f0999ea03eff18babc48643c568">map::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02293">map.cpp:2293</a></div></div>
<div class="ttc" id="aclassmap_html_a395a729a4b954692cf08d13e1d32f73e"><div class="ttname"><a href="classmap.html#a395a729a4b954692cf08d13e1d32f73e">map::field_at</a></div><div class="ttdeci">const field &amp; field_at(const tripoint &amp;p) const</div><div class="ttdoc">Get the fields that are here.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05301">map.cpp:5301</a></div></div>
<div class="ttc" id="aclassmap_html_ac1c02ce0648fe07137b86c84fc72f5de"><div class="ttname"><a href="classmap.html#ac1c02ce0648fe07137b86c84fc72f5de">map::get_vehicles</a></div><div class="ttdeci">VehicleList get_vehicles()</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00237">map.cpp:237</a></div></div>
<div class="ttc" id="aclassplayer_html_aa57c61de29a5e410c100aee07798b9b1"><div class="ttname"><a href="classplayer.html#aa57c61de29a5e410c100aee07798b9b1">player::practice</a></div><div class="ttdeci">void practice(const skill_id &amp;id, int amount, int cap=99, bool suppress_warning=false)</div><div class="ttdoc">This handles giving xp for a skill.</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l02329">player.cpp:2329</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00179">calendar.h:180</a></div></div>
<div class="ttc" id="aclassvehicle_html"><div class="ttname"><a href="classvehicle.html">vehicle</a></div><div class="ttdoc">A vehicle as a whole with all its components.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00674">vehicle.h:675</a></div></div>
<div class="ttc" id="aclassvehicle_html_a341515426011486c265d016c35f84de6"><div class="ttname"><a href="classvehicle.html#a341515426011486c265d016c35f84de6">vehicle::player_in_control</a></div><div class="ttdeci">bool player_in_control(const Character &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00277">vehicle.cpp:277</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4d83e86fe57ec6126893a68f68c3c304"><div class="ttname"><a href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">vehicle::velocity</a></div><div class="ttdeci">int velocity</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01918">vehicle.h:1918</a></div></div>
<div class="ttc" id="aclassvehicle_html_a5a7d83716bf73d4b58d265b626872d01"><div class="ttname"><a href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">vehicle::total_mass</a></div><div class="ttdeci">units::mass total_mass() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03306">vehicle.cpp:3306</a></div></div>
<div class="ttc" id="aclassvehicle_html_aec9a1faa6740b681867d48878e37d7bb"><div class="ttname"><a href="classvehicle.html#aec9a1faa6740b681867d48878e37d7bb">vehicle::is_moving</a></div><div class="ttdeci">bool is_moving() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03544">vehicle.cpp:3544</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a></div><div class="ttdeci">@ m_warning</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00264">enums.h:264</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a8226e8a134603e5bc06df05efd13d8d1"><div class="ttname"><a href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a></div><div class="ttdeci">constexpr double MAX_RECOIL</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00127">game_constants.h:127</a></div></div>
<div class="ttc" id="amap_8h_html_ae705edb5469cf2668ca5bc3297d75ebb"><div class="ttname"><a href="map_8h.html#ae705edb5469cf2668ca5bc3297d75ebb">VehicleList</a></div><div class="ttdeci">std::vector&lt; wrapped_vehicle &gt; VehicleList</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00085">map.h:85</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258aeb9fcbd752ad2c632ccc4383c5641b69"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258aeb9fcbd752ad2c632ccc4383c5641b69">TFLAG_DEEP_WATER</a></div><div class="ttdeci">@ TFLAG_DEEP_WATER</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00301">mapdata.h:301</a></div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_a53b7fa49a536bb361b3a6b2ef669bea4"><div class="ttname"><a href="namespacecharacter__funcs.html#a53b7fa49a536bb361b3a6b2ef669bea4">character_funcs::search_surroundings</a></div><div class="ttdeci">void search_surroundings(Character &amp;who)</div><div class="ttdoc">Search surrounding squares for traps (and maybe other things in the future).</div><div class="ttdef"><b>Definition:</b> <a href="character__turn_8cpp_source.html#l01061">character_turn.cpp:1061</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00065">rng.cpp:65</a></div></div>
<div class="ttc" id="atype__id_8h_html_a13f6e54f55e89d7c6cd86da6d0a7e785"><div class="ttname"><a href="type__id_8h.html#a13f6e54f55e89d7c6cd86da6d0a7e785">skill_id</a></div><div class="ttdeci">string_id&lt; Skill &gt; skill_id</div><div class="ttdef"><b>Definition:</b> <a href="type__id_8h_source.html#l00146">type_id.h:146</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8cpp_source.html#l00985">Creature::add_effect()</a>, <a class="el" href="creature_8h_source.html#l00677">Creature::add_msg_player_or_npc()</a>, <a class="el" href="bodypart_8h_source.html#l00082">all_body_parts</a>, <a class="el" href="creature_8h_source.html#l00122">Creature::as_player()</a>, <a class="el" href="bodypart_8h_source.html#l00044">bp_arm_l</a>, <a class="el" href="bodypart_8h_source.html#l00045">bp_arm_r</a>, <a class="el" href="bodypart_8h_source.html#l00042">bp_eyes</a>, <a class="el" href="bodypart_8h_source.html#l00050">bp_foot_l</a>, <a class="el" href="bodypart_8h_source.html#l00051">bp_foot_r</a>, <a class="el" href="bodypart_8h_source.html#l00046">bp_hand_l</a>, <a class="el" href="bodypart_8h_source.html#l00047">bp_hand_r</a>, <a class="el" href="bodypart_8h_source.html#l00041">bp_head</a>, <a class="el" href="bodypart_8h_source.html#l00048">bp_leg_l</a>, <a class="el" href="bodypart_8h_source.html#l00049">bp_leg_r</a>, <a class="el" href="bodypart_8h_source.html#l00043">bp_mouth</a>, <a class="el" href="bodypart_8h_source.html#l00040">bp_torso</a>, <a class="el" href="suffer_8cpp_source.html#l01757">Character::drench()</a>, <a class="el" href="character__turn_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>, <a class="el" href="character__turn_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a>, <a class="el" href="map_8cpp_source.html#l05301">map::field_at()</a>, <a class="el" href="effect_8cpp_source.html#l00797">effect::get_duration()</a>, <a class="el" href="creature_8cpp_source.html#l01224">Creature::get_effect()</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="map_8cpp_source.html#l00237">map::get_vehicles()</a>, <a class="el" href="creature_8cpp_source.html#l01184">Creature::has_effect()</a>, <a class="el" href="map_8cpp_source.html#l02293">map::has_flag()</a>, <a class="el" href="character_8h_source.html#l01543">Character::in_vehicle</a>, <a class="el" href="creature_8cpp_source.html#l00189">Creature::is_dangerous_fields()</a>, <a class="el" href="vehicle_8cpp_source.html#l03544">vehicle::is_moving()</a>, <a class="el" href="creature_8h_source.html#l00098">Creature::is_npc()</a>, <a class="el" href="effect_8cpp_source.html#l00553">effect::is_null()</a>, <a class="el" href="creature_8cpp_source.html#l00174">Creature::is_underwater()</a>, <a class="el" href="enums_8h_source.html#l00264">m_warning</a>, <a class="el" href="character_8h_source.html#l01557">Character::martial_arts_data</a>, <a class="el" href="game__constants_8h_source.html#l00127">MAX_RECOIL</a>, <a class="el" href="effect_8cpp_source.html#l00821">effect::mod_duration()</a>, <a class="el" href="creature_8h_source.html#l00570">Creature::moves</a>, <a class="el" href="bodypart_8h_source.html#l00052">num_bp</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="vehicle_8cpp_source.html#l00277">vehicle::player_in_control()</a>, <a class="el" href="character_8cpp_source.html#l00721">Character::pos()</a>, <a class="el" href="player_8cpp_source.html#l02329">player::practice()</a>, <a class="el" href="character_8h_source.html#l00592">Character::recoil</a>, <a class="el" href="character__turn_8cpp_source.html#l01061">search_surroundings()</a>, <a class="el" href="character__turn_8cpp.html#a1d815a8053cfecc8a05374bf92924ba2">skill_swimming</a>, <a class="el" href="mapdata_8h_source.html#l00301">TFLAG_DEEP_WATER</a>, <a class="el" href="vehicle_8cpp_source.html#l03306">vehicle::total_mass()</a>, <a class="el" href="vehicle_8h_source.html#l01918">vehicle::velocity</a>, <a class="el" href="character_8cpp_source.html#l01641">Character::wait_effects()</a>, and <a class="el" href="calendar_8cpp_source.html#l00521">x_in_y()</a>.</p>

<p class="reference">Referenced by <a class="el" href="player__activity_8cpp_source.html#l00273">player_activity::do_turn()</a>, <a class="el" href="handle__action_8cpp_source.html#l01519">game::handle_action()</a>, and <a class="el" href="npcmove_8cpp_source.html#l02655">npc::move_pause()</a>.</p>

</div>
</div>
<a id="a470b862a6936cbfbd1e80a46b78f1914" name="a470b862a6936cbfbd1e80a46b78f1914"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a470b862a6936cbfbd1e80a46b78f1914">&#9670;&nbsp;</a></span>estimate_effect_dur()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__duration.html">time_duration</a> character_funcs::estimate_effect_dur </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>skill_lvl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#acc8305d21e9a186d196c8ff88ba2cf19">efftype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>target_effect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtime__duration.html">time_duration</a> &amp;&#160;</td>
          <td class="paramname"><em>error_magnitude</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classCreature.html">Creature</a> &amp;&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Estimate effect duration based on relevant skill. </p>

<p class="definition">Definition at line <a class="el" href="character__functions_8cpp_source.html#l00055">55</a> of file <a class="el" href="character__functions_8cpp_source.html">character_functions.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>{</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> zero_duration = 0_turns;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <a class="code hl_class" href="classtime__duration.html">time_duration</a> estimate = std::max( zero_duration, target.<a class="code hl_function" href="classCreature.html#a2bb3543ca955d69805e57e4e09d878ef">get_effect_dur</a>( target_effect ) +</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>                                       <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -1, 1 ) * error_magnitude *</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>                                       <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, std::max( 0, threshold - skill_lvl ) ) );</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="keywordflow">return</span> estimate;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>}</div>
<div class="ttc" id="aartifact_8cpp_html_a70800e95389f34dd34186fafaea2a840"><div class="ttname"><a href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a></div><div class="ttdeci">units::quantity&lt; V, B &gt; rng(const units::quantity&lt; V, B &gt; &amp;min, const units::quantity&lt; V, B &gt; &amp;max)</div><div class="ttdef"><b>Definition:</b> <a href="artifact_8cpp_source.html#l00032">artifact.cpp:32</a></div></div>
<div class="ttc" id="aclassCreature_html_a2bb3543ca955d69805e57e4e09d878ef"><div class="ttname"><a href="classCreature.html#a2bb3543ca955d69805e57e4e09d878ef">Creature::get_effect_dur</a></div><div class="ttdeci">time_duration get_effect_dur(const efftype_id &amp;eff_id, body_part bp=num_bp) const</div><div class="ttdoc">Returns the duration of the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01246">creature.cpp:1246</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature_8cpp_source.html#l01246">Creature::get_effect_dur()</a>, and <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>.</p>

<p class="reference">Referenced by <a class="el" href="npctalk_8cpp_source.html#l00898">dialogue::dynamic_line()</a>.</p>

</div>
</div>
<a id="adda4d5fd10b7216c49a0f9b6010de579" name="adda4d5fd10b7216c49a0f9b6010de579"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adda4d5fd10b7216c49a0f9b6010de579">&#9670;&nbsp;</a></span>fine_detail_vision_mod() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float character_funcs::fine_detail_vision_mod </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates multiplier for the time taken to perform tasks that require detail vision (reading, crafting, etc.). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">who</td><td><a class="el" href="classCharacter.html">Character</a> to check for </td></tr>
    <tr><td class="paramname">pos</td><td>Check remote spot as if the character were standing there</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A value from 1.0 (unimpeded vision) to 11.0 (totally blind).</dd></dl>
<p>Examples of produced values: 1.0 is LIGHT_AMBIENT_LIT or brighter 4.0 is a dark clear night, barely bright enough for reading and crafting 6.0 is LIGHT_AMBIENT_DIM 7.3 is LIGHT_AMBIENT_MINIMAL, a dark cloudy night, unlit indoors 11.0 is zero light or blindness </p>

<p class="definition">Definition at line <a class="el" href="character__functions_8cpp_source.html#l00129">129</a> of file <a class="el" href="character__functions_8cpp_source.html">character_functions.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>{</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecharacter__funcs.html#a03ea116da570af10c630e0fe3a7ea6fc">fine_detail_vision_mod</a>( who, who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() );</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character__functions_8cpp_source.html#l00129">fine_detail_vision_mod()</a>, and <a class="el" href="character_8cpp_source.html#l00721">Character::pos()</a>.</p>

<p class="reference">Referenced by <a class="el" href="character__functions_8cpp_source.html#l00160">can_see_fine_details()</a>, <a class="el" href="panels_8cpp_source.html#l01497">draw_env_compact()</a>, <a class="el" href="panels_8cpp_source.html#l01864">draw_lighting_classic()</a>, <a class="el" href="panels_8cpp_source.html#l01303">draw_loc_labels()</a>, <a class="el" href="character__functions_8cpp_source.html#l00129">fine_detail_vision_mod()</a>, <a class="el" href="avatar_8cpp_source.html#l00255">avatar::get_book_reader()</a>, <a class="el" href="iuse_8cpp_source.html#l05834">iuse::gun_repair()</a>, <a class="el" href="crafting_8cpp_source.html#l00131">lighting_crafting_speed_multiplier()</a>, <a class="el" href="avatar_8cpp_source.html#l00387">avatar::read()</a>, <a class="el" href="activity__handlers_8cpp_source.html#l03323">activity_handlers::repair_item_do_turn()</a>, <a class="el" href="npc_8cpp_source.html#l00876">npc::time_to_read()</a>, <a class="el" href="avatar_8cpp_source.html#l00345">avatar::time_to_read()</a>, and <a class="el" href="iuse__actor_8cpp_source.html#l04720">sew_advanced_actor::use()</a>.</p>

</div>
</div>
<a id="a03ea116da570af10c630e0fe3a7ea6fc" name="a03ea116da570af10c630e0fe3a7ea6fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03ea116da570af10c630e0fe3a7ea6fc">&#9670;&nbsp;</a></span>fine_detail_vision_mod() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float character_funcs::fine_detail_vision_mod </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="character__functions_8cpp_source.html#l00134">134</a> of file <a class="el" href="character__functions_8cpp_source.html">character_functions.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>{</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="comment">// PER_SLIME_OK implies you can get enough eyes around the bile</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    <span class="comment">// that you can generally see.  There still will be the haze, but</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <span class="comment">// it&#39;s annoying rather than limiting.</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#a4a9671b1264d53cb74469e78000e2544">is_blind</a>() ||</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        ( ( who.<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a> ) || who.<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a84bed2f340b7b3bf9a0ae0c95eabc6dc">effect_darkness</a> ) ) &amp;&amp;</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>          !who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#ac54117dbd505336cc0e980684cf77774">trait_PER_SLIME_OK</a> ) ) ) {</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>        <span class="keywordflow">return</span> 11.0;</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    }</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    <span class="comment">// Scale linearly as light level approaches LIGHT_AMBIENT_LIT.</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <span class="comment">// If we&#39;re actually a source of light, assume we can direct it where we need it.</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    <span class="comment">// Therefore give a hefty bonus relative to ambient light.</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    <span class="keywordtype">float</span> own_light = std::max( 1.0f, <a class="code hl_variable" href="lightmap_8h.html#aee8c4bc593d2863e405cd21438a01f44">LIGHT_AMBIENT_LIT</a> - who.<a class="code hl_function" href="classCharacter.html#a4db8f0b7490ded5bd598b640fdbed978">active_light</a>() - 2.0f );</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span> </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <span class="comment">// Same calculation as above, but with a result 3 lower.</span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    <span class="keywordtype">float</span> ambient_light = std::max( 1.0f, <a class="code hl_variable" href="lightmap_8h.html#aee8c4bc593d2863e405cd21438a01f44">LIGHT_AMBIENT_LIT</a> - <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().ambient_light_at( p ) + 1.0f );</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <span class="keywordflow">return</span> std::min( own_light, ambient_light );</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>}</div>
<div class="ttc" id="acharacter__functions_8cpp_html_a468a4ea99d05230e46c7e014a68270a7"><div class="ttname"><a href="character__functions_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a></div><div class="ttdeci">static const efftype_id effect_boomered(&quot;boomered&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_a84bed2f340b7b3bf9a0ae0c95eabc6dc"><div class="ttname"><a href="character__functions_8cpp.html#a84bed2f340b7b3bf9a0ae0c95eabc6dc">effect_darkness</a></div><div class="ttdeci">static const efftype_id effect_darkness(&quot;darkness&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_ac54117dbd505336cc0e980684cf77774"><div class="ttname"><a href="character__functions_8cpp.html#ac54117dbd505336cc0e980684cf77774">trait_PER_SLIME_OK</a></div><div class="ttdeci">static const trait_id trait_PER_SLIME_OK(&quot;PER_SLIME_OK&quot;)</div></div>
<div class="ttc" id="aclassCharacter_html_a4a9671b1264d53cb74469e78000e2544"><div class="ttname"><a href="classCharacter.html#a4a9671b1264d53cb74469e78000e2544">Character::is_blind</a></div><div class="ttdeci">bool is_blind() const</div><div class="ttdoc">Returns true if the player isn't able to see.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06254">character.cpp:6254</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4db8f0b7490ded5bd598b640fdbed978"><div class="ttname"><a href="classCharacter.html#a4db8f0b7490ded5bd598b640fdbed978">Character::active_light</a></div><div class="ttdeci">float active_light() const</div><div class="ttdoc">Returns character luminosity based on the brightest active item they are carrying.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06289">character.cpp:6289</a></div></div>
<div class="ttc" id="alightmap_8h_html_aee8c4bc593d2863e405cd21438a01f44"><div class="ttname"><a href="lightmap_8h.html#aee8c4bc593d2863e405cd21438a01f44">LIGHT_AMBIENT_LIT</a></div><div class="ttdeci">static constexpr float LIGHT_AMBIENT_LIT</div><div class="ttdef"><b>Definition:</b> <a href="lightmap_8h_source.html#l00018">lightmap.h:18</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character_8cpp_source.html#l06289">Character::active_light()</a>, <a class="el" href="character__functions_8cpp.html#a468a4ea99d05230e46c7e014a68270a7">effect_boomered</a>, <a class="el" href="character__functions_8cpp.html#a84bed2f340b7b3bf9a0ae0c95eabc6dc">effect_darkness</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="creature_8cpp_source.html#l01184">Creature::has_effect()</a>, <a class="el" href="mutation_8cpp_source.html#l00103">Character::has_trait()</a>, <a class="el" href="character_8cpp_source.html#l06254">Character::is_blind()</a>, <a class="el" href="lightmap_8h_source.html#l00018">LIGHT_AMBIENT_LIT</a>, and <a class="el" href="character__functions_8cpp.html#ac54117dbd505336cc0e980684cf77774">trait_PER_SLIME_OK</a>.</p>

</div>
</div>
<a id="a6c63f47142d40af0092a1be132a53efa" name="a6c63f47142d40af0092a1be132a53efa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c63f47142d40af0092a1be132a53efa">&#9670;&nbsp;</a></span>fmt_wielded_weapon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string character_funcs::fmt_wielded_weapon </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the formatted name of the currently wielded item (if any) with current gun mode (if gun) </p>

<p class="definition">Definition at line <a class="el" href="character__functions_8cpp_source.html#l00393">393</a> of file <a class="el" href="character__functions_8cpp_source.html">character_functions.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>{</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    <span class="keywordflow">if</span>( !who.<a class="code hl_function" href="classCharacter.html#ad79464264cb8a2061f5888d092f5cd86">is_armed</a>() ) {</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>        <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;fists&quot;</span> );</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>    }</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;weapon = who.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>;</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    <span class="keywordflow">if</span>( weapon.<a class="code hl_function" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>        std::string str = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;(%d) [%s] %s&quot;</span>, weapon.<a class="code hl_function" href="classitem.html#a26c025fd4909bd31c8e91ed87905507b">ammo_remaining</a>(),</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>                                         weapon.<a class="code hl_function" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>().<a class="code hl_function" href="classgun__mode.html#a583a586a605731dbd36af20553c0e51d">tname</a>(), weapon.<a class="code hl_function" href="classitem.html#a70359b9e831ed97023891631058595b6">type_name</a>() );</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>        <span class="comment">// Is either the base item or at least one auxiliary gunmod loaded (includes empty magazines)</span></div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>        <span class="keywordtype">bool</span> base = weapon.<a class="code hl_function" href="classitem.html#a5d89f04a2a08245ec865db0865e8a6c1">ammo_capacity</a>() &gt; 0 &amp;&amp; !weapon.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <span class="stringliteral">&quot;RELOAD_AND_SHOOT&quot;</span> );</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span> </div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>        <span class="keyword">const</span> <span class="keyword">auto</span> mods = weapon.<a class="code hl_function" href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">gunmods</a>();</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>        <span class="keywordtype">bool</span> aux = std::any_of( mods.begin(), mods.end(), [&amp;]( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> * e ) {</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>            return e-&gt;is_gun() &amp;&amp; e-&gt;ammo_capacity() &gt; 0 &amp;&amp; !e-&gt;has_flag( <span class="stringliteral">&quot;RELOAD_AND_SHOOT&quot;</span> );</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>        } );</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span> </div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>        <span class="keywordflow">if</span>( base || aux ) {</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>            <span class="keywordflow">for</span>( <span class="keyword">auto</span> e : mods ) {</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>                <span class="keywordflow">if</span>( e-&gt;is_gun() &amp;&amp; e-&gt;ammo_capacity() &gt; 0 &amp;&amp; !e-&gt;has_flag( <span class="stringliteral">&quot;RELOAD_AND_SHOOT&quot;</span> ) ) {</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>                    str += <span class="stringliteral">&quot; (&quot;</span> + <a class="code hl_function" href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">std::to_string</a>( e-&gt;ammo_remaining() );</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>                    <span class="keywordflow">if</span>( e-&gt;magazine_integral() ) {</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>                        str += <span class="stringliteral">&quot;/&quot;</span> + <a class="code hl_function" href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">std::to_string</a>( e-&gt;ammo_capacity() );</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>                    }</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>                    str += <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>                }</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>            }</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        }</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>        <span class="keywordflow">return</span> str;</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span> </div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( weapon.<a class="code hl_function" href="classitem.html#a723753bab4cc789e3ec186846c9916a3">is_container</a>() &amp;&amp; weapon.<a class="code hl_variable" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code hl_function" href="classitem__contents.html#aa744f662499b0a03029ea58389cc260a">num_item_stacks</a>() == 1 ) {</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s (%d)&quot;</span>, weapon.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>(),</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>                              weapon.<a class="code hl_variable" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code hl_function" href="classitem__contents.html#a14299e40ca1440af11623c86e0b84072">front</a>().<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> );</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span> </div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>        <span class="keywordflow">return</span> weapon.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>();</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    }</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_aeb989652ea2bf7fd03b07a74fd30bd7a"><div class="ttname"><a href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">to_string</a></div><div class="ttdeci">std::string to_string(const time_duration &amp;d)</div><div class="ttdoc">Returns a string showing a duration.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00327">calendar.cpp:327</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad79464264cb8a2061f5888d092f5cd86"><div class="ttname"><a href="classCharacter.html#ad79464264cb8a2061f5888d092f5cd86">Character::is_armed</a></div><div class="ttdeci">bool is_armed() const</div><div class="ttdoc">Returns true if the character is wielding something.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l00145">melee.cpp:145</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae68b7a6565646ba662e448bded8b6599"><div class="ttname"><a href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">Character::weapon</a></div><div class="ttdeci">item weapon</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01553">character.h:1553</a></div></div>
<div class="ttc" id="aclassgun__mode_html_a583a586a605731dbd36af20553c0e51d"><div class="ttname"><a href="classgun__mode.html#a583a586a605731dbd36af20553c0e51d">gun_mode::tname</a></div><div class="ttdeci">std::string tname() const</div><div class="ttdef"><b>Definition:</b> <a href="gun__mode_8h_source.html#l00059">gun_mode.h:59</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a14299e40ca1440af11623c86e0b84072"><div class="ttname"><a href="classitem__contents.html#a14299e40ca1440af11623c86e0b84072">item_contents::front</a></div><div class="ttdeci">item &amp; front()</div><div class="ttdoc">this is an artifact of the previous code using front() everywhere for contents.</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00190">item_contents.cpp:190</a></div></div>
<div class="ttc" id="aclassitem__contents_html_aa744f662499b0a03029ea58389cc260a"><div class="ttname"><a href="classitem__contents.html#aa744f662499b0a03029ea58389cc260a">item_contents::num_item_stacks</a></div><div class="ttdeci">size_t num_item_stacks() const</div><div class="ttdoc">returns the number of items stacks in contents each item that is not count_by_charges,...</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00027">item_contents.cpp:27</a></div></div>
<div class="ttc" id="aclassitem_html_a1a94ea108d695febf7f2bcf090f097fa"><div class="ttname"><a href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">item::gun_current_mode</a></div><div class="ttdeci">gun_mode gun_current_mode() const</div><div class="ttdoc">Get the current mode for this gun (or an invalid mode if item is not a gun)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07772">item.cpp:7772</a></div></div>
<div class="ttc" id="aclassitem_html_a26c025fd4909bd31c8e91ed87905507b"><div class="ttname"><a href="classitem.html#a26c025fd4909bd31c8e91ed87905507b">item::ammo_remaining</a></div><div class="ttdeci">int ammo_remaining() const</div><div class="ttdoc">Quantity of ammunition currently loaded in tool, gun or auxiliary gunmod.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07261">item.cpp:7261</a></div></div>
<div class="ttc" id="aclassitem_html_a2912b2e15a4eec07a5070fffbbd152e8"><div class="ttname"><a href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">item::is_gun</a></div><div class="ttdeci">bool is_gun() const</div><div class="ttdoc">Can this item be used to perform a ranged attack?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06402">item.cpp:6402</a></div></div>
<div class="ttc" id="aclassitem_html_a4afe851abb42cbff0857065860f96e0e"><div class="ttname"><a href="classitem.html#a4afe851abb42cbff0857065860f96e0e">item::contents</a></div><div class="ttdeci">item_contents contents</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02158">item.h:2158</a></div></div>
<div class="ttc" id="aclassitem_html_a5d89f04a2a08245ec865db0865e8a6c1"><div class="ttname"><a href="classitem.html#a5d89f04a2a08245ec865db0865e8a6c1">item::ammo_capacity</a></div><div class="ttdeci">int ammo_capacity() const</div><div class="ttdoc">Maximum quantity of ammunition loadable for tool, gun or auxiliary gunmod.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07288">item.cpp:7288</a></div></div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02196">item.h:2196</a></div></div>
<div class="ttc" id="aclassitem_html_a70359b9e831ed97023891631058595b6"><div class="ttname"><a href="classitem.html#a70359b9e831ed97023891631058595b6">item::type_name</a></div><div class="ttdeci">std::string type_name(unsigned int quantity=1) const</div><div class="ttdoc">Name of the item type (not the item), with proper plural.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09723">item.cpp:9723</a></div></div>
<div class="ttc" id="aclassitem_html_a723753bab4cc789e3ec186846c9916a3"><div class="ttname"><a href="classitem.html#a723753bab4cc789e3ec186846c9916a3">item::is_container</a></div><div class="ttdeci">bool is_container() const</div><div class="ttdoc">Whether this is container.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06604">item.cpp:6604</a></div></div>
<div class="ttc" id="aclassitem_html_a7e78e26dcf9b357cda769c3ca2938eda"><div class="ttname"><a href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, bool with_prefix=true, unsigned int truncate=0) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04478">item.cpp:4478</a></div></div>
<div class="ttc" id="aclassitem_html_aaa5aeb6f838927babb10ede535cf2a73"><div class="ttname"><a href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">item::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05227">item.cpp:5227</a></div></div>
<div class="ttc" id="aclassitem_html_acd78321ba4d5c09d39f1d58d20b68484"><div class="ttname"><a href="classitem.html#acd78321ba4d5c09d39f1d58d20b68484">item::gunmods</a></div><div class="ttdeci">std::vector&lt; item * &gt; gunmods()</div><div class="ttdoc">Returns all gunmods currently attached to this item (always empty if item not a gun)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07614">item.cpp:7614</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00431">string_formatter.h:431</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="item_8cpp_source.html#l07288">item::ammo_capacity()</a>, <a class="el" href="item_8cpp_source.html#l07261">item::ammo_remaining()</a>, <a class="el" href="item_8h_source.html#l02196">item::charges</a>, <a class="el" href="item_8h_source.html#l02158">item::contents</a>, <a class="el" href="item__contents_8cpp_source.html#l00190">item_contents::front()</a>, <a class="el" href="item_8cpp_source.html#l07772">item::gun_current_mode()</a>, <a class="el" href="item_8cpp_source.html#l07614">item::gunmods()</a>, <a class="el" href="item_8cpp_source.html#l05227">item::has_flag()</a>, <a class="el" href="melee_8cpp_source.html#l00145">Character::is_armed()</a>, <a class="el" href="item_8cpp_source.html#l06604">item::is_container()</a>, <a class="el" href="item_8cpp_source.html#l06402">item::is_gun()</a>, <a class="el" href="item_8cpp_source.html#l07539">item::magazine_integral()</a>, <a class="el" href="item__contents_8cpp_source.html#l00027">item_contents::num_item_stacks()</a>, <a class="el" href="string__formatter_8h_source.html#l00431">string_format()</a>, <a class="el" href="gun__mode_8h_source.html#l00059">gun_mode::tname()</a>, <a class="el" href="item_8cpp_source.html#l04478">item::tname()</a>, <a class="el" href="calendar_8cpp_source.html#l00327">to_string()</a>, <a class="el" href="item_8cpp_source.html#l09723">item::type_name()</a>, and <a class="el" href="character_8h_source.html#l01553">Character::weapon</a>.</p>

<p class="reference">Referenced by <a class="el" href="player_8cpp_source.html#l01234">player::can_wield()</a>, <a class="el" href="panels_8cpp_source.html#l01497">draw_env_compact()</a>, <a class="el" href="panels_8cpp_source.html#l01883">draw_weapon_classic()</a>, <a class="el" href="panels_8cpp_source.html#l01903">draw_weapon_classic_alt()</a>, and <a class="el" href="panels_8cpp_source.html#l01383">draw_weapon_labels()</a>.</p>

</div>
</div>
<a id="aaa9f2cc376f03128e0a486a90c7376fa" name="aaa9f2cc376f03128e0a486a90c7376fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa9f2cc376f03128e0a486a90c7376fa">&#9670;&nbsp;</a></span>get_book_fun_for()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int character_funcs::get_book_fun_for </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>book</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns enjoyability value of a book for given character. </p>

<p class="definition">Definition at line <a class="el" href="character__functions_8cpp_source.html#l00100">100</a> of file <a class="el" href="character__functions_8cpp_source.html">character_functions.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>{</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    <span class="keywordtype">int</span> fun_bonus = book.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_variable" href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">book</a>-&gt;fun;</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="keywordflow">if</span>( !book.<a class="code hl_function" href="classitem.html#a980b9e48afd103973a201fc487d0af8b">is_book</a>() ) {</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;called avatar::book_fun_for with non-book&quot;</span> );</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    }</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <span class="comment">// If you don&#39;t have a problem with eating humans, To Serve Man becomes rewarding</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <span class="keywordflow">if</span>( ( ch.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#af1a3e5c07ef96be118895afd086ba143">trait_CANNIBAL</a> ) ||</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>          ch.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a9bbf692360c0fe96f9fccf41db5756be">trait_PSYCHOPATH</a> ) ||</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>          ch.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a93f31d20e997d966be8b81d64c31582b">trait_SAPIOVORE</a> ) ) &amp;&amp;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>        book.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() == <a class="code hl_variable" href="character__functions_8cpp.html#aba728ba1b648f6ef568b96fbe1cd74fb">itype_cookbook_human</a> ) {</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>        fun_bonus = std::abs( fun_bonus );</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ch.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#abf47c050c3a01d3496c3eb251fa9c517">trait_SPIRITUAL</a> ) &amp;&amp; book.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <span class="stringliteral">&quot;INSPIRATIONAL&quot;</span> ) ) {</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>        fun_bonus = std::abs( fun_bonus * 3 );</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    }</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span> </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <span class="keywordflow">if</span>( ch.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a8af31c1a565772726aba73e25a4b6df6">trait_LOVES_BOOKS</a> ) ) {</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        fun_bonus++;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    }</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="keywordflow">if</span>( fun_bonus &gt; 1 &amp;&amp; book.<a class="code hl_function" href="classitem.html#af607ad36c67593022397b437a3a5b5b4">get_chapters</a>() &gt; 0 &amp;&amp; book.<a class="code hl_function" href="classitem.html#aa96ff544e52ece35ed8755c89b7822c7">get_remaining_chapters</a>( ch ) == 0 ) {</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>        fun_bonus /= 2;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    }</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span> </div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="keywordflow">return</span> fun_bonus;</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>}</div>
<div class="ttc" id="acharacter__functions_8cpp_html_a8af31c1a565772726aba73e25a4b6df6"><div class="ttname"><a href="character__functions_8cpp.html#a8af31c1a565772726aba73e25a4b6df6">trait_LOVES_BOOKS</a></div><div class="ttdeci">static const trait_id trait_LOVES_BOOKS(&quot;LOVES_BOOKS&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_a93f31d20e997d966be8b81d64c31582b"><div class="ttname"><a href="character__functions_8cpp.html#a93f31d20e997d966be8b81d64c31582b">trait_SAPIOVORE</a></div><div class="ttdeci">static const trait_id trait_SAPIOVORE(&quot;SAPIOVORE&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_a9bbf692360c0fe96f9fccf41db5756be"><div class="ttname"><a href="character__functions_8cpp.html#a9bbf692360c0fe96f9fccf41db5756be">trait_PSYCHOPATH</a></div><div class="ttdeci">static const trait_id trait_PSYCHOPATH(&quot;PSYCHOPATH&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_aba728ba1b648f6ef568b96fbe1cd74fb"><div class="ttname"><a href="character__functions_8cpp.html#aba728ba1b648f6ef568b96fbe1cd74fb">itype_cookbook_human</a></div><div class="ttdeci">static const itype_id itype_cookbook_human(&quot;cookbook_human&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_abf47c050c3a01d3496c3eb251fa9c517"><div class="ttname"><a href="character__functions_8cpp.html#abf47c050c3a01d3496c3eb251fa9c517">trait_SPIRITUAL</a></div><div class="ttdeci">static const trait_id trait_SPIRITUAL(&quot;SPIRITUAL&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_af1a3e5c07ef96be118895afd086ba143"><div class="ttname"><a href="character__functions_8cpp.html#af1a3e5c07ef96be118895afd086ba143">trait_CANNIBAL</a></div><div class="ttdeci">static const trait_id trait_CANNIBAL(&quot;CANNIBAL&quot;)</div></div>
<div class="ttc" id="aclassitem_html_a980b9e48afd103973a201fc487d0af8b"><div class="ttname"><a href="classitem.html#a980b9e48afd103973a201fc487d0af8b">item::is_book</a></div><div class="ttdeci">bool is_book() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06594">item.cpp:6594</a></div></div>
<div class="ttc" id="aclassitem_html_aa79dad64e1ef6347219be2f8666e2752"><div class="ttname"><a href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">item::typeId</a></div><div class="ttdeci">const itype_id &amp; typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08232">item.cpp:8232</a></div></div>
<div class="ttc" id="aclassitem_html_aa96ff544e52ece35ed8755c89b7822c7"><div class="ttname"><a href="classitem.html#aa96ff544e52ece35ed8755c89b7822c7">item::get_remaining_chapters</a></div><div class="ttdeci">int get_remaining_chapters(const Character &amp;ch) const</div><div class="ttdoc">Get the number of unread chapters.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06971">item.cpp:6971</a></div></div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02157">item.h:2157</a></div></div>
<div class="ttc" id="aclassitem_html_af607ad36c67593022397b437a3a5b5b4"><div class="ttname"><a href="classitem.html#af607ad36c67593022397b437a3a5b5b4">item::get_chapters</a></div><div class="ttdeci">int get_chapters() const</div><div class="ttdoc">How many chapters the book has (if any).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06963">item.cpp:6963</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
<div class="ttc" id="astructitype_html_aec04d23e907e3ea3cd9cfb08369dffcd"><div class="ttname"><a href="structitype.html#aec04d23e907e3ea3cd9cfb08369dffcd">itype::book</a></div><div class="ttdeci">cata::value_ptr&lt; islot_book &gt; book</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00854">itype.h:854</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="itype_8h_source.html#l00854">itype::book</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="item_8cpp_source.html#l06963">item::get_chapters()</a>, <a class="el" href="item_8cpp_source.html#l06971">item::get_remaining_chapters()</a>, <a class="el" href="item_8cpp_source.html#l05227">item::has_flag()</a>, <a class="el" href="mutation_8cpp_source.html#l00103">Character::has_trait()</a>, <a class="el" href="item_8cpp_source.html#l06594">item::is_book()</a>, <a class="el" href="character__functions_8cpp.html#aba728ba1b648f6ef568b96fbe1cd74fb">itype_cookbook_human</a>, <a class="el" href="character__functions_8cpp.html#af1a3e5c07ef96be118895afd086ba143">trait_CANNIBAL</a>, <a class="el" href="character__functions_8cpp.html#a8af31c1a565772726aba73e25a4b6df6">trait_LOVES_BOOKS</a>, <a class="el" href="character__functions_8cpp.html#a9bbf692360c0fe96f9fccf41db5756be">trait_PSYCHOPATH</a>, <a class="el" href="character__functions_8cpp.html#a93f31d20e997d966be8b81d64c31582b">trait_SAPIOVORE</a>, <a class="el" href="character__functions_8cpp.html#abf47c050c3a01d3496c3eb251fa9c517">trait_SPIRITUAL</a>, <a class="el" href="item_8h_source.html#l02157">item::type</a>, and <a class="el" href="item_8cpp_source.html#l08232">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item_8cpp_source.html#l02862">item::book_info()</a>, <a class="el" href="avatar_8cpp_source.html#l00742">avatar::do_read()</a>, <a class="el" href="npc_8cpp_source.html#l00898">npc::finish_read()</a>, <a class="el" href="character__functions_8cpp_source.html#l00086">is_fun_to_read()</a>, <a class="el" href="avatar_8cpp_source.html#l00387">avatar::read()</a>, <a class="el" href="game__inventory_8cpp_source.html#l00978">read_inventory_preset::read_inventory_preset()</a>, and <a class="el" href="avatar_8cpp_source.html#l00677">skim_book_msg()</a>.</p>

</div>
</div>
<a id="a862df11441bba358b82fa47ce88ebe85" name="a862df11441bba358b82fa47ce88ebe85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a862df11441bba358b82fa47ce88ebe85">&#9670;&nbsp;</a></span>is_fun_to_read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool character_funcs::is_fun_to_read </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>book</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns whether character considers it fun to read the book. </p>

<p class="definition">Definition at line <a class="el" href="character__functions_8cpp_source.html#l00086">86</a> of file <a class="el" href="character__functions_8cpp_source.html">character_functions.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>{</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <span class="comment">// If you don&#39;t have a problem with eating humans, To Serve Man becomes rewarding</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    <span class="keywordflow">if</span>( ( ch.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#af1a3e5c07ef96be118895afd086ba143">trait_CANNIBAL</a> ) || ch.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a9bbf692360c0fe96f9fccf41db5756be">trait_PSYCHOPATH</a> ) ||</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>          ch.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a93f31d20e997d966be8b81d64c31582b">trait_SAPIOVORE</a> ) ) &amp;&amp;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>        book.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() == <a class="code hl_variable" href="character__functions_8cpp.html#aba728ba1b648f6ef568b96fbe1cd74fb">itype_cookbook_human</a> ) {</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ch.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#abf47c050c3a01d3496c3eb251fa9c517">trait_SPIRITUAL</a> ) &amp;&amp; book.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <span class="stringliteral">&quot;INSPIRATIONAL&quot;</span> ) ) {</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecharacter__funcs.html#aaa9f2cc376f03128e0a486a90c7376fa">get_book_fun_for</a>( ch, book ) &gt; 0;</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    }</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>}</div>
<div class="ttc" id="anamespacecharacter__funcs_html_aaa9f2cc376f03128e0a486a90c7376fa"><div class="ttname"><a href="namespacecharacter__funcs.html#aaa9f2cc376f03128e0a486a90c7376fa">character_funcs::get_book_fun_for</a></div><div class="ttdeci">int get_book_fun_for(const Character &amp;ch, const item &amp;book)</div><div class="ttdoc">Returns enjoyability value of a book for given character.</div><div class="ttdef"><b>Definition:</b> <a href="character__functions_8cpp_source.html#l00100">character_functions.cpp:100</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character__functions_8cpp_source.html#l00100">get_book_fun_for()</a>, <a class="el" href="item_8cpp_source.html#l05227">item::has_flag()</a>, <a class="el" href="mutation_8cpp_source.html#l00103">Character::has_trait()</a>, <a class="el" href="character__functions_8cpp.html#aba728ba1b648f6ef568b96fbe1cd74fb">itype_cookbook_human</a>, <a class="el" href="character__functions_8cpp.html#af1a3e5c07ef96be118895afd086ba143">trait_CANNIBAL</a>, <a class="el" href="character__functions_8cpp.html#a9bbf692360c0fe96f9fccf41db5756be">trait_PSYCHOPATH</a>, <a class="el" href="character__functions_8cpp.html#a93f31d20e997d966be8b81d64c31582b">trait_SAPIOVORE</a>, <a class="el" href="character__functions_8cpp.html#abf47c050c3a01d3496c3eb251fa9c517">trait_SPIRITUAL</a>, and <a class="el" href="item_8cpp_source.html#l08232">item::typeId()</a>.</p>

<p class="reference">Referenced by <a class="el" href="avatar_8cpp_source.html#l00255">avatar::get_book_reader()</a>, <a class="el" href="avatar_8cpp_source.html#l00387">avatar::read()</a>, <a class="el" href="npc_8cpp_source.html#l00876">npc::time_to_read()</a>, and <a class="el" href="avatar_8cpp_source.html#l00345">avatar::time_to_read()</a>.</p>

</div>
</div>
<a id="a392d1b99006a4f1f16c773e38762043d" name="a392d1b99006a4f1f16c773e38762043d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a392d1b99006a4f1f16c773e38762043d">&#9670;&nbsp;</a></span>rate_sleep_spot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int character_funcs::rate_sleep_spot </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rate point's ability to serve as a bed. </p>
<p >Takes all mutations, fatigue and stimulants into account. </p>

<p class="definition">Definition at line <a class="el" href="character__functions_8cpp_source.html#l00296">296</a> of file <a class="el" href="character__functions_8cpp_source.html">character_functions.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>{</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> current_stim = who.<a class="code hl_function" href="classCharacter.html#a7335f053c5874081211552623fa625c5">get_stim</a>();</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structcharacter__funcs_1_1comfort__response__t.html">comfort_response_t</a> comfort_info = <a class="code hl_function" href="namespacecharacter__funcs.html#a1686a89929a324a03d1396cac6ab1a24">base_comfort_value</a>( who, p );</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    <span class="keywordflow">if</span>( comfort_info.<a class="code hl_variable" href="structcharacter__funcs_1_1comfort__response__t.html#a884dc3843bf221f63b408da4d979cf23">aid</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>        who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You use your %s for comfort.&quot;</span> ), comfort_info.<a class="code hl_variable" href="structcharacter__funcs_1_1comfort__response__t.html#a884dc3843bf221f63b408da4d979cf23">aid</a>-&gt;<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    }</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span> </div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    <span class="keywordtype">int</span> sleepy = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( comfort_info.<a class="code hl_variable" href="structcharacter__funcs_1_1comfort__response__t.html#af678f41d1dfcd14b9504c107a946ff14">level</a> );</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    <span class="keywordtype">bool</span> watersleep = who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#abf29a0f9f2b03dbf9baa8dd6af688d41">trait_WATERSLEEP</a> );</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span> </div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#afe055a629e5f9afdb201cd9a8749283c">has_addiction</a>( <a class="code hl_enumvalue" href="pldata_8h.html#abffc2f52fa6cfeac2e388c6de0ac295bab32bd403b93dc6deffdab7af55e82596">add_type::SLEEP</a> ) ) {</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>        sleepy -= 4;</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    }</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a01725f3a1c7d4a3c718b4a395b5ae41d">trait_INSOMNIA</a> ) ) {</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>        <span class="comment">// 12.5 points is the difference between &quot;tired&quot; and &quot;dead tired&quot;</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>        sleepy -= 12;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    }</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a5e899e783cee2462a5571083c6abe22f">trait_EASYSLEEPER</a> ) ) {</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>        <span class="comment">// Low fatigue (being rested) has a much stronger effect than high fatigue</span></div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>        <span class="comment">// so it&#39;s OK for the value to be that much higher</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>        sleepy += 40;</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    }</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a978adf30232e0bcf1b9d38a73b8dd30e">bio_soporific</a> ) ) {</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        sleepy += 30;</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    }</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a21395d70727e0cc20a2417b6aaea56e3">trait_EASYSLEEPER2</a> ) ) {</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>        <span class="comment">// At this point, the only limit to sleep is tiredness</span></div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>        sleepy += 100;</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    }</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    <span class="keywordflow">if</span>( watersleep &amp;&amp; <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#af0e872a5d0a7bf1e9745aeb18d3b5e44">has_flag_ter</a>( <span class="stringliteral">&quot;SWIMMABLE&quot;</span>, p ) ) {</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>        sleepy += 10; <span class="comment">//comfy water!</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    }</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span> </div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#a31c20b0d370fef88fefe520ff046daf5">get_fatigue</a>() &lt; <a class="code hl_enumvalue" href="character_8h.html#abf088072c9ca5b676f7f7545bac9a137a287f44f35ecb230e8b997abaad077f46">fatigue_levels::tired</a> + 1 ) {</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>        sleepy -= <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( ( <a class="code hl_enumvalue" href="character_8h.html#abf088072c9ca5b676f7f7545bac9a137a287f44f35ecb230e8b997abaad077f46">fatigue_levels::tired</a> + 1 - who.<a class="code hl_function" href="classCharacter.html#a31c20b0d370fef88fefe520ff046daf5">get_fatigue</a>() ) / 4 );</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>        sleepy += <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( ( who.<a class="code hl_function" href="classCharacter.html#a31c20b0d370fef88fefe520ff046daf5">get_fatigue</a>() - <a class="code hl_enumvalue" href="character_8h.html#abf088072c9ca5b676f7f7545bac9a137a287f44f35ecb230e8b997abaad077f46">fatigue_levels::tired</a> + 1 ) / 16 );</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    }</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    <span class="keywordflow">if</span>( current_stim &gt; 0 || !who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a01725f3a1c7d4a3c718b4a395b5ae41d">trait_INSOMNIA</a> ) ) {</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>        sleepy -= 2 * current_stim;</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>        <span class="comment">// Make it harder for insomniac to get around the trait</span></div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>        sleepy -= current_stim;</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    }</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span> </div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <span class="keywordflow">return</span> sleepy;</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>}</div>
<div class="ttc" id="acharacter_8h_html_abf088072c9ca5b676f7f7545bac9a137a287f44f35ecb230e8b997abaad077f46"><div class="ttname"><a href="character_8h.html#abf088072c9ca5b676f7f7545bac9a137a287f44f35ecb230e8b997abaad077f46">fatigue_levels::tired</a></div><div class="ttdeci">@ tired</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_a01725f3a1c7d4a3c718b4a395b5ae41d"><div class="ttname"><a href="character__functions_8cpp.html#a01725f3a1c7d4a3c718b4a395b5ae41d">trait_INSOMNIA</a></div><div class="ttdeci">static const trait_id trait_INSOMNIA(&quot;INSOMNIA&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_a21395d70727e0cc20a2417b6aaea56e3"><div class="ttname"><a href="character__functions_8cpp.html#a21395d70727e0cc20a2417b6aaea56e3">trait_EASYSLEEPER2</a></div><div class="ttdeci">static const trait_id trait_EASYSLEEPER2(&quot;EASYSLEEPER2&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_a5e899e783cee2462a5571083c6abe22f"><div class="ttname"><a href="character__functions_8cpp.html#a5e899e783cee2462a5571083c6abe22f">trait_EASYSLEEPER</a></div><div class="ttdeci">static const trait_id trait_EASYSLEEPER(&quot;EASYSLEEPER&quot;)</div></div>
<div class="ttc" id="acharacter__functions_8cpp_html_a978adf30232e0bcf1b9d38a73b8dd30e"><div class="ttname"><a href="character__functions_8cpp.html#a978adf30232e0bcf1b9d38a73b8dd30e">bio_soporific</a></div><div class="ttdeci">static const bionic_id bio_soporific(&quot;bio_soporific&quot;)</div></div>
<div class="ttc" id="aclassCharacter_html_a31c20b0d370fef88fefe520ff046daf5"><div class="ttname"><a href="classCharacter.html#a31c20b0d370fef88fefe520ff046daf5">Character::get_fatigue</a></div><div class="ttdeci">int get_fatigue() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04467">character.cpp:4467</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7335f053c5874081211552623fa625c5"><div class="ttname"><a href="classCharacter.html#a7335f053c5874081211552623fa625c5">Character::get_stim</a></div><div class="ttdeci">int get_stim() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07073">character.cpp:7073</a></div></div>
<div class="ttc" id="aclassCharacter_html_af9c7419575e23d52745c94009929fafb"><div class="ttname"><a href="classCharacter.html#af9c7419575e23d52745c94009929fafb">Character::has_active_bionic</a></div><div class="ttdeci">bool has_active_bionic(const bionic_id &amp;b) const</div><div class="ttdoc">Returns true if the player has the entered bionic id and it is powered on.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01939">character.cpp:1939</a></div></div>
<div class="ttc" id="aclassCharacter_html_afe055a629e5f9afdb201cd9a8749283c"><div class="ttname"><a href="classCharacter.html#afe055a629e5f9afdb201cd9a8749283c">Character::has_addiction</a></div><div class="ttdeci">bool has_addiction(add_type type) const</div><div class="ttdoc">Returns true if the player has an addiction of the specified type.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l01940">suffer.cpp:1940</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00265">enums.h:265</a></div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_a1686a89929a324a03d1396cac6ab1a24"><div class="ttname"><a href="namespacecharacter__funcs.html#a1686a89929a324a03d1396cac6ab1a24">character_funcs::base_comfort_value</a></div><div class="ttdeci">comfort_response_t base_comfort_value(const Character &amp;who, const tripoint &amp;p)</div><div class="ttdoc">Rate point's ability to serve as a bed.</div><div class="ttdef"><b>Definition:</b> <a href="character__functions_8cpp_source.html#l00165">character_functions.cpp:165</a></div></div>
<div class="ttc" id="apldata_8h_html_abffc2f52fa6cfeac2e388c6de0ac295bab32bd403b93dc6deffdab7af55e82596"><div class="ttname"><a href="pldata_8h.html#abffc2f52fa6cfeac2e388c6de0ac295bab32bd403b93dc6deffdab7af55e82596">add_type::SLEEP</a></div><div class="ttdeci">@ SLEEP</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="character__functions_8h_source.html#l00088">character_funcs::comfort_response_t::aid</a>, <a class="el" href="character__functions_8cpp_source.html#l00165">base_comfort_value()</a>, <a class="el" href="character__functions_8cpp.html#a978adf30232e0bcf1b9d38a73b8dd30e">bio_soporific</a>, <a class="el" href="character_8cpp_source.html#l04467">Character::get_fatigue()</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="character_8cpp_source.html#l07073">Character::get_stim()</a>, <a class="el" href="character_8cpp_source.html#l01939">Character::has_active_bionic()</a>, <a class="el" href="suffer_8cpp_source.html#l01940">Character::has_addiction()</a>, <a class="el" href="map_8cpp_source.html#l02312">map::has_flag_ter()</a>, <a class="el" href="mutation_8cpp_source.html#l00103">Character::has_trait()</a>, <a class="el" href="character__functions_8h_source.html#l00087">character_funcs::comfort_response_t::level</a>, <a class="el" href="enums_8h_source.html#l00265">m_info</a>, <a class="el" href="pldata_8h.html#abffc2f52fa6cfeac2e388c6de0ac295bab32bd403b93dc6deffdab7af55e82596">SLEEP</a>, <a class="el" href="character_8h.html#abf088072c9ca5b676f7f7545bac9a137a287f44f35ecb230e8b997abaad077f46">tired</a>, <a class="el" href="item_8cpp_source.html#l04478">item::tname()</a>, <a class="el" href="character__functions_8cpp.html#a5e899e783cee2462a5571083c6abe22f">trait_EASYSLEEPER</a>, <a class="el" href="character__functions_8cpp.html#a21395d70727e0cc20a2417b6aaea56e3">trait_EASYSLEEPER2</a>, <a class="el" href="character__functions_8cpp.html#a01725f3a1c7d4a3c718b4a395b5ae41d">trait_INSOMNIA</a>, and <a class="el" href="character__functions_8cpp.html#abf29a0f9f2b03dbf9baa8dd6af688d41">trait_WATERSLEEP</a>.</p>

<p class="reference">Referenced by <a class="el" href="npcmove_8cpp_source.html#l00960">npc::execute_action()</a>, and <a class="el" href="character__functions_8cpp_source.html#l00346">roll_can_sleep()</a>.</p>

</div>
</div>
<a id="a16d62ac71c344a9b0482777456bb7b74" name="a16d62ac71c344a9b0482777456bb7b74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16d62ac71c344a9b0482777456bb7b74">&#9670;&nbsp;</a></span>roll_can_sleep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool character_funcs::roll_can_sleep </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checked each turn during "lying_down", returns true if the avatar falls asleep. </p>

<p class="definition">Definition at line <a class="el" href="character__functions_8cpp_source.html#l00346">346</a> of file <a class="el" href="character__functions_8cpp_source.html">character_functions.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>{</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a5ba3e18250fa524fe8548fa0a1e98535">effect_meth</a> ) ) {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>        <span class="comment">// Sleep ain&#39;t happening until that meth wears off completely.</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    }</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span> </div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>    <span class="comment">// Since there&#39;s a bit of randomness to falling asleep, we want to</span></div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <span class="comment">// prevent exploiting this if can_sleep() gets called over and over.</span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    <span class="comment">// Only actually check if we can fall asleep no more frequently than</span></div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>    <span class="comment">// every 30 minutes.  We&#39;re assuming that if we return true, we&#39;ll</span></div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    <span class="comment">// immediately be falling asleep after that.</span></div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>    <span class="comment">// Also if player debug menu&#39;d time backwards this breaks, just do the</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>    <span class="comment">// check anyway, this will reset the timer if &#39;dur&#39; is negative.</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__point.html">time_point</a> now = <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>;</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> dur = now - who.<a class="code hl_variable" href="classCharacter.html#a5315b433514914a1e7e08939dde1e58a">last_sleep_check</a>;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>    <span class="keywordflow">if</span>( dur &gt;= 0_turns &amp;&amp; dur &lt; 30_minutes ) {</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    }</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    who.<a class="code hl_variable" href="classCharacter.html#a5315b433514914a1e7e08939dde1e58a">last_sleep_check</a> = now;</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span> </div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>    <span class="keywordtype">int</span> sleepy = <a class="code hl_function" href="namespacecharacter__funcs.html#a392d1b99006a4f1f16c773e38762043d">character_funcs::rate_sleep_spot</a>( who, who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() );</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>    sleepy += <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( -8, 8 );</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>    <span class="keywordtype">bool</span> <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> = sleepy &gt; 0;</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span> </div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( <a class="code hl_variable" href="character__functions_8cpp.html#a978adf30232e0bcf1b9d38a73b8dd30e">bio_soporific</a> ) ) {</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>        <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a65a091d2c8d36f9102c09bc24836bf6e">bio_soporific_powered_at_last_sleep_check</a> &amp;&amp; !who.<a class="code hl_function" href="classCharacter.html#ad33fda9a7f9d4c8529cff2bbaea675ae">has_power</a>() ) {</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>            who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your soporific inducer runs out of power!&quot;</span> ) );</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !who.<a class="code hl_variable" href="classCharacter.html#a65a091d2c8d36f9102c09bc24836bf6e">bio_soporific_powered_at_last_sleep_check</a> &amp;&amp; who.<a class="code hl_function" href="classCharacter.html#ad33fda9a7f9d4c8529cff2bbaea675ae">has_power</a>() ) {</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>            who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your soporific inducer starts back up.&quot;</span> ) );</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        }</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        who.<a class="code hl_variable" href="classCharacter.html#a65a091d2c8d36f9102c09bc24836bf6e">bio_soporific_powered_at_last_sleep_check</a> = who.<a class="code hl_function" href="classCharacter.html#ad33fda9a7f9d4c8529cff2bbaea675ae">has_power</a>();</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    }</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span> </div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    <span class="keywordflow">return</span> <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>;</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>}</div>
<div class="ttc" id="acharacter__functions_8cpp_html_a5ba3e18250fa524fe8548fa0a1e98535"><div class="ttname"><a href="character__functions_8cpp.html#a5ba3e18250fa524fe8548fa0a1e98535">effect_meth</a></div><div class="ttdeci">static const efftype_id effect_meth(&quot;meth&quot;)</div></div>
<div class="ttc" id="aclassCharacter_html_a5315b433514914a1e7e08939dde1e58a"><div class="ttname"><a href="classCharacter.html#a5315b433514914a1e7e08939dde1e58a">Character::last_sleep_check</a></div><div class="ttdeci">time_point last_sleep_check</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02111">character.h:2111</a></div></div>
<div class="ttc" id="aclassCharacter_html_a65a091d2c8d36f9102c09bc24836bf6e"><div class="ttname"><a href="classCharacter.html#a65a091d2c8d36f9102c09bc24836bf6e">Character::bio_soporific_powered_at_last_sleep_check</a></div><div class="ttdeci">bool bio_soporific_powered_at_last_sleep_check</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02112">character.h:2112</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad33fda9a7f9d4c8529cff2bbaea675ae"><div class="ttname"><a href="classCharacter.html#ad33fda9a7f9d4c8529cff2bbaea675ae">Character::has_power</a></div><div class="ttdeci">bool has_power() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02061">character.cpp:2061</a></div></div>
<div class="ttc" id="aclasstime__point_html"><div class="ttname"><a href="classtime__point.html">time_point</a></div><div class="ttdoc">A point in the game time.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00430">calendar.h:431</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00260">enums.h:260</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00261">enums.h:261</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00036">calendar.cpp:36</a></div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_a392d1b99006a4f1f16c773e38762043d"><div class="ttname"><a href="namespacecharacter__funcs.html#a392d1b99006a4f1f16c773e38762043d">character_funcs::rate_sleep_spot</a></div><div class="ttdeci">int rate_sleep_spot(const Character &amp;who, const tripoint &amp;p)</div><div class="ttdoc">Rate point's ability to serve as a bed.</div><div class="ttdef"><b>Definition:</b> <a href="character__functions_8cpp_source.html#l00296">character_functions.cpp:296</a></div></div>
<div class="ttc" id="anamespacedetail_1_1digits_html_aad69d2373aa047bdd9e81494bf3da5ae"><div class="ttname"><a href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">detail::digits::result</a></div><div class="ttdeci">result</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__format-inl_8h_source.html#l01626">fmtlib_format-inl.h:1626</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="character__functions_8cpp.html#a978adf30232e0bcf1b9d38a73b8dd30e">bio_soporific</a>, <a class="el" href="character_8h_source.html#l02112">Character::bio_soporific_powered_at_last_sleep_check</a>, <a class="el" href="character__functions_8cpp.html#a5ba3e18250fa524fe8548fa0a1e98535">effect_meth</a>, <a class="el" href="character_8cpp_source.html#l01939">Character::has_active_bionic()</a>, <a class="el" href="creature_8cpp_source.html#l01184">Creature::has_effect()</a>, <a class="el" href="character_8cpp_source.html#l02061">Character::has_power()</a>, <a class="el" href="character_8h_source.html#l02111">Character::last_sleep_check</a>, <a class="el" href="enums_8h_source.html#l00261">m_bad</a>, <a class="el" href="enums_8h_source.html#l00260">m_good</a>, <a class="el" href="character_8cpp_source.html#l00721">Character::pos()</a>, <a class="el" href="character__functions_8cpp_source.html#l00296">rate_sleep_spot()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="player__hardcoded__effects_8cpp_source.html#l00472">Character::hardcoded_effects()</a>, and <a class="el" href="activity__handlers_8cpp_source.html#l03485">activity_handlers::try_sleep_do_turn()</a>.</p>

</div>
</div>
<a id="a53b7fa49a536bb361b3a6b2ef669bea4" name="a53b7fa49a536bb361b3a6b2ef669bea4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53b7fa49a536bb361b3a6b2ef669bea4">&#9670;&nbsp;</a></span>search_surroundings()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void character_funcs::search_surroundings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Search surrounding squares for traps (and maybe other things in the future). </p>

<p class="definition">Definition at line <a class="el" href="character__turn_8cpp_source.html#l01061">1061</a> of file <a class="el" href="character__turn_8cpp_source.html">character_turn.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>{</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>    <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a0701e6a3f1987d9fa3f76b450dd5624a">controlling_vehicle</a> ) {</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>    }</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>    <span class="keyword">const</span> <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>    <span class="comment">// Search for traps in a larger area than before because this is the only</span></div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>    <span class="comment">// way we can &quot;find&quot; traps that aren&#39;t marked as visible.</span></div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>    <span class="comment">// Detection formula takes care of likelihood of seeing within this range.</span></div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;tp : here.<a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), 5 ) ) {</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtrap.html">trap</a> &amp;tr = here.<a class="code hl_function" href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">tr_at</a>( tp );</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>        <span class="keywordflow">if</span>( tr.<a class="code hl_function" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">is_null</a>() || tp == who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) {</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>        }</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>        <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( <a class="code hl_variable" href="character__turn_8cpp.html#ad8239c9fba8c9d73da4db8671d7430d0">bio_ground_sonar</a> ) &amp;&amp; !who.<a class="code hl_function" href="classCharacter.html#a7cf3a039fed01ee44525ea41940cb00d">knows_trap</a>( tp ) &amp;&amp;</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>            ( tr.<a class="code hl_variable" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a> == <a class="code hl_variable" href="trap_8cpp.html#abecb554db3424388894ab98bde179238">tr_beartrap_buried</a> ||</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>              tr.<a class="code hl_variable" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a> == <a class="code hl_variable" href="trap_8cpp.html#ac666204330f19cb23e099f6870b8a1a4">tr_landmine_buried</a> || tr.<a class="code hl_variable" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a> == <a class="code hl_variable" href="memorial__logger_8cpp.html#ab4f7bfd1861799c55e2d7fbf2717c962">tr_sinkhole</a> ) ) {</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>            <span class="keyword">const</span> std::string <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> = <a class="code hl_function" href="line_8cpp.html#a19634ed59e09da9312d6fa110a38539c">direction_name</a>( <a class="code hl_function" href="coordinates_8h.html#a00be0762df7b46da965e55caffac53db">direction_from</a>( who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), tp ) );</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>            who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your ground sonar detected a %1$s to the %2$s!&quot;</span> ),</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>                                   tr.<a class="code hl_function" href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">name</a>(), <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> );</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>            who.<a class="code hl_function" href="classCharacter.html#ada34ca3fb472a8b1816e297ead2b31df">add_known_trap</a>( tp, tr );</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>        }</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>        <span class="keywordflow">if</span>( !who.<a class="code hl_function" href="classCharacter.html#aba9bd7517b334e6ed4149889ed32377a">sees</a>( tp ) ) {</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>        }</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>        <span class="keywordflow">if</span>( tr.<a class="code hl_function" href="structtrap.html#aafab5c450397fa7ea6430a9334c2859c">is_always_invisible</a>() || tr.<a class="code hl_function" href="structtrap.html#abeb5ff27f9f78475035f22aabdcfe834">can_see</a>( tp, who ) ) {</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>            <span class="comment">// Already seen, or can never be seen</span></div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>        }</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>        <span class="comment">// Chance to detect traps we haven&#39;t yet seen.</span></div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>        <span class="keywordflow">if</span>( tr.<a class="code hl_function" href="structtrap.html#afefc8440f9684bc6694c3c14dc59a727">detect_trap</a>( tp, who ) ) {</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>            <span class="keywordflow">if</span>( tr.<a class="code hl_function" href="structtrap.html#a1bd5955eae82045548ff8fc99a63edfc">get_visibility</a>() &gt; 0 ) {</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>                <span class="comment">// Only bug player about traps that aren&#39;t trivial to spot.</span></div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>                <span class="keyword">const</span> std::string <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> = <a class="code hl_function" href="line_8cpp.html#a19634ed59e09da9312d6fa110a38539c">direction_name</a>(</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>                                                  <a class="code hl_function" href="coordinates_8h.html#a00be0762df7b46da965e55caffac53db">direction_from</a>( who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), tp ) );</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>                who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;ve spotted a %1$s to the %2$s!&quot;</span> ),</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>                                       tr.<a class="code hl_function" href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">name</a>(), <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> );</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>            }</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>            who.<a class="code hl_function" href="classCharacter.html#ada34ca3fb472a8b1816e297ead2b31df">add_known_trap</a>( tp, tr );</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>        }</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>    }</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>}</div>
<div class="ttc" id="acharacter__turn_8cpp_html_ad8239c9fba8c9d73da4db8671d7430d0"><div class="ttname"><a href="character__turn_8cpp.html#ad8239c9fba8c9d73da4db8671d7430d0">bio_ground_sonar</a></div><div class="ttdeci">static const bionic_id bio_ground_sonar(&quot;bio_ground_sonar&quot;)</div></div>
<div class="ttc" id="aclassCharacter_html_a0701e6a3f1987d9fa3f76b450dd5624a"><div class="ttname"><a href="classCharacter.html#a0701e6a3f1987d9fa3f76b450dd5624a">Character::controlling_vehicle</a></div><div class="ttdeci">bool controlling_vehicle</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00255">character.h:255</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7cf3a039fed01ee44525ea41940cb00d"><div class="ttname"><a href="classCharacter.html#a7cf3a039fed01ee44525ea41940cb00d">Character::knows_trap</a></div><div class="ttdeci">bool knows_trap(const tripoint &amp;pos) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10151">character.cpp:10151</a></div></div>
<div class="ttc" id="aclassCharacter_html_aba9bd7517b334e6ed4149889ed32377a"><div class="ttname"><a href="classCharacter.html#aba9bd7517b334e6ed4149889ed32377a">Character::sees</a></div><div class="ttdeci">bool sees(const tripoint &amp;t, bool is_player=false, int range_mod=0) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10337">character.cpp:10337</a></div></div>
<div class="ttc" id="aclassCharacter_html_ada34ca3fb472a8b1816e297ead2b31df"><div class="ttname"><a href="classCharacter.html#ada34ca3fb472a8b1816e297ead2b31df">Character::add_known_trap</a></div><div class="ttdeci">void add_known_trap(const tripoint &amp;pos, const trap &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10157">character.cpp:10157</a></div></div>
<div class="ttc" id="aclassmap_html_a30ccb67ed3651d350f2caf214e0b5176"><div class="ttname"><a href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">map::tr_at</a></div><div class="ttdeci">const trap &amp; tr_at(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05139">map.cpp:5139</a></div></div>
<div class="ttc" id="aclassmap_html_a4f5f812d7e89a998429958573a4c340f"><div class="ttname"><a href="classmap.html#a4f5f812d7e89a998429958573a4c340f">map::points_in_radius</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_in_radius(const tripoint &amp;center, size_t radius, size_t radiusz=0) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l08619">map.cpp:8619</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a00be0762df7b46da965e55caffac53db"><div class="ttname"><a href="coordinates_8h.html#a00be0762df7b46da965e55caffac53db">direction_from</a></div><div class="ttdeci">direction direction_from(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00540">coordinates.h:540</a></div></div>
<div class="ttc" id="aline_8cpp_html_a19634ed59e09da9312d6fa110a38539c"><div class="ttname"><a href="line_8cpp.html#a19634ed59e09da9312d6fa110a38539c">direction_name</a></div><div class="ttdeci">std::string direction_name(const direction dir)</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00528">line.cpp:528</a></div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="line_8h_source.html#l00039">line.h:39</a></div></div>
<div class="ttc" id="amemorial__logger_8cpp_html_ab4f7bfd1861799c55e2d7fbf2717c962"><div class="ttname"><a href="memorial__logger_8cpp.html#ab4f7bfd1861799c55e2d7fbf2717c962">tr_sinkhole</a></div><div class="ttdeci">static const trap_str_id tr_sinkhole(&quot;tr_sinkhole&quot;)</div></div>
<div class="ttc" id="astructtrap_html_a01b0ef8443ac5ba4e7455880ca2dc44b"><div class="ttname"><a href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">trap::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00177">trap.cpp:177</a></div></div>
<div class="ttc" id="astructtrap_html_a1bd5955eae82045548ff8fc99a63edfc"><div class="ttname"><a href="structtrap.html#a1bd5955eae82045548ff8fc99a63edfc">trap::get_visibility</a></div><div class="ttdeci">int get_visibility() const</div><div class="ttdoc">How easy it is to spot the trap.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00133">trap.h:133</a></div></div>
<div class="ttc" id="astructtrap_html_aafab5c450397fa7ea6430a9334c2859c"><div class="ttname"><a href="structtrap.html#aafab5c450397fa7ea6430a9334c2859c">trap::is_always_invisible</a></div><div class="ttdeci">bool is_always_invisible() const</div><div class="ttdoc">There are special always invisible traps.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00127">trap.h:127</a></div></div>
<div class="ttc" id="astructtrap_html_ab2767aee5179ad23b3ad0b6b4b2415af"><div class="ttname"><a href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">trap::loadid</a></div><div class="ttdeci">trap_id loadid</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00088">trap.h:88</a></div></div>
<div class="ttc" id="astructtrap_html_abeb5ff27f9f78475035f22aabdcfe834"><div class="ttname"><a href="structtrap.html#abeb5ff27f9f78475035f22aabdcfe834">trap::can_see</a></div><div class="ttdeci">bool can_see(const tripoint &amp;pos, const Character &amp;p) const</div><div class="ttdoc">Can player/npc p see this kind of trap, either by their memory (they known there is the trap) or by t...</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00223">trap.cpp:223</a></div></div>
<div class="ttc" id="astructtrap_html_afefc8440f9684bc6694c3c14dc59a727"><div class="ttname"><a href="structtrap.html#afefc8440f9684bc6694c3c14dc59a727">trap::detect_trap</a></div><div class="ttdeci">bool detect_trap(const tripoint &amp;pos, const Character &amp;p) const</div><div class="ttdoc">Player has not yet seen the trap and returns the variable chance, at this moment, of whether the trap...</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00193">trap.cpp:193</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00147">point.h:147</a></div></div>
<div class="ttc" id="atrap_8cpp_html_abecb554db3424388894ab98bde179238"><div class="ttname"><a href="trap_8cpp.html#abecb554db3424388894ab98bde179238">tr_beartrap_buried</a></div><div class="ttdeci">trap_id tr_beartrap_buried</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00287">trap.cpp:287</a></div></div>
<div class="ttc" id="atrap_8cpp_html_ac666204330f19cb23e099f6870b8a1a4"><div class="ttname"><a href="trap_8cpp.html#ac666204330f19cb23e099f6870b8a1a4">tr_landmine_buried</a></div><div class="ttdeci">trap_id tr_landmine_buried</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00299">trap.cpp:299</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="character_8cpp_source.html#l10157">Character::add_known_trap()</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="character__turn_8cpp.html#ad8239c9fba8c9d73da4db8671d7430d0">bio_ground_sonar</a>, <a class="el" href="trap_8cpp_source.html#l00223">trap::can_see()</a>, <a class="el" href="character_8h_source.html#l00255">Character::controlling_vehicle</a>, <a class="el" href="trap_8cpp_source.html#l00193">trap::detect_trap()</a>, <a class="el" href="coordinates_8h_source.html#l00540">direction_from()</a>, <a class="el" href="line_8cpp_source.html#l00528">direction_name()</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="trap_8h_source.html#l00133">trap::get_visibility()</a>, <a class="el" href="character_8cpp_source.html#l01939">Character::has_active_bionic()</a>, <a class="el" href="trap_8h_source.html#l00127">trap::is_always_invisible()</a>, <a class="el" href="trap_8cpp_source.html#l00245">trap::is_null()</a>, <a class="el" href="character_8cpp_source.html#l10151">Character::knows_trap()</a>, <a class="el" href="trap_8h_source.html#l00088">trap::loadid</a>, <a class="el" href="enums_8h_source.html#l00264">m_warning</a>, <a class="el" href="trap_8cpp_source.html#l00177">trap::name()</a>, <a class="el" href="map_8cpp_source.html#l08619">map::points_in_radius()</a>, <a class="el" href="character_8cpp_source.html#l00721">Character::pos()</a>, <a class="el" href="character_8cpp_source.html#l10337">Character::sees()</a>, <a class="el" href="map_8cpp_source.html#l05139">map::tr_at()</a>, <a class="el" href="trap_8cpp_source.html#l00287">tr_beartrap_buried</a>, <a class="el" href="trap_8cpp_source.html#l00299">tr_landmine_buried</a>, and <a class="el" href="memorial__logger_8cpp.html#ab4f7bfd1861799c55e2d7fbf2717c962">tr_sinkhole</a>.</p>

<p class="reference">Referenced by <a class="el" href="character__turn_8cpp_source.html#l00967">do_pause()</a>, and <a class="el" href="game_8cpp_source.html#l09041">game::place_player()</a>.</p>

</div>
</div>
<a id="adaa760a90e1a9cc452c7b756bcde2a60" name="adaa760a90e1a9cc452c7b756bcde2a60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adaa760a90e1a9cc452c7b756bcde2a60">&#9670;&nbsp;</a></span>siphon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void character_funcs::siphon </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classvehicle.html">vehicle</a> &amp;&#160;</td>
          <td class="paramname"><em>veh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#ac2f82f863d4e9e8f267a77a73910ebbf">itype_id</a> &amp;&#160;</td>
          <td class="paramname"><em>desired_liquid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Siphons fuel (if available) from the specified vehicle into container or similar via game::handle_liquid. </p>
<p >May start a character activity. </p>

<p class="definition">Definition at line <a class="el" href="character__functions_8cpp_source.html#l00066">66</a> of file <a class="el" href="character__functions_8cpp_source.html">character_functions.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>{</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    <span class="keywordflow">if</span>( !ch.<a class="code hl_function" href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">is_avatar</a>() ) {</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>        <span class="comment">// TODO: implement for NPCs</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Siphoning not implemented for NPCs.&quot;</span> );</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    }</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <span class="keyword">auto</span> qty = veh.<a class="code hl_function" href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">fuel_left</a>( desired_liquid );</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <span class="keywordflow">if</span>( qty &lt;= 0 ) {</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>        ch.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There is not enough %s left to siphon it.&quot;</span> ),</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>                              <a class="code hl_function" href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a>( desired_liquid ) );</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    }</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span> </div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <a class="code hl_class" href="classitem.html">item</a> liquid( desired_liquid, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, qty );</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespaceliquid__handler.html#a30393ea5ae789bd91dc85e09f7c504e2">liquid_handler::handle_liquid</a>( liquid, <span class="keyword">nullptr</span>, 1, <span class="keyword">nullptr</span>, &amp;veh ) ) {</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>        veh.<a class="code hl_function" href="classvehicle.html#a2b28d63a4879b75d5a186289c54f6330">drain</a>( desired_liquid, qty - liquid.charges );</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    }</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>}</div>
<div class="ttc" id="aclassCreature_html_ac209d32cbfd3774af3d5c0500e2fae52"><div class="ttname"><a href="classCreature.html#ac209d32cbfd3774af3d5c0500e2fae52">Creature::is_avatar</a></div><div class="ttdeci">virtual bool is_avatar() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00095">creature.h:95</a></div></div>
<div class="ttc" id="aclassitem_html_a438855ffd52d33307e1dfba6d607535b"><div class="ttname"><a href="classitem.html#a438855ffd52d33307e1dfba6d607535b">item::nname</a></div><div class="ttdeci">static std::string nname(const itype_id &amp;id, unsigned int quantity=1)</div><div class="ttdoc">Returns the translated item name for the item with given id.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09794">item.cpp:9794</a></div></div>
<div class="ttc" id="aclassvehicle_html_a2b28d63a4879b75d5a186289c54f6330"><div class="ttname"><a href="classvehicle.html#a2b28d63a4879b75d5a186289c54f6330">vehicle::drain</a></div><div class="ttdeci">int drain(const itype_id &amp;ftype, int amount)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03426">vehicle.cpp:3426</a></div></div>
<div class="ttc" id="aclassvehicle_html_a5b3c37a197c21cdd469e7779f8c1db50"><div class="ttname"><a href="classvehicle.html#a5b3c37a197c21cdd469e7779f8c1db50">vehicle::fuel_left</a></div><div class="ttdeci">int fuel_left(const itype_id &amp;ftype, bool recurse=false) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03359">vehicle.cpp:3359</a></div></div>
<div class="ttc" id="anamespaceliquid__handler_html_a30393ea5ae789bd91dc85e09f7c504e2"><div class="ttname"><a href="namespaceliquid__handler.html#a30393ea5ae789bd91dc85e09f7c504e2">liquid_handler::handle_liquid</a></div><div class="ttdeci">bool handle_liquid(item &amp;liquid, item *const source, const int radius, const tripoint *const source_pos, const vehicle *const source_veh, const int part_num, const monster *const source_mon)</div><div class="ttdoc">This may start a player activity if either source_pos or source_veh is not null.</div><div class="ttdef"><b>Definition:</b> <a href="handle__liquid_8cpp_source.html#l00400">handle_liquid.cpp:400</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="creature_8h_source.html#l00593">Creature::add_msg_if_player()</a>, <a class="el" href="item_8h_source.html#l02196">item::charges</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="vehicle_8cpp_source.html#l03426">vehicle::drain()</a>, <a class="el" href="vehicle_8cpp_source.html#l03359">vehicle::fuel_left()</a>, <a class="el" href="handle__liquid_8cpp_source.html#l00400">liquid_handler::handle_liquid()</a>, <a class="el" href="creature_8h_source.html#l00095">Creature::is_avatar()</a>, <a class="el" href="enums_8h_source.html#l00261">m_bad</a>, <a class="el" href="item_8cpp_source.html#l09794">item::nname()</a>, and <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>.</p>

<p class="reference">Referenced by <a class="el" href="vehicle__use_8cpp_source.html#l01925">vehicle::interact_with()</a>.</p>

</div>
</div>
<a id="afa9463f9c384d1e193bdbc8dc337f8d3" name="afa9463f9c384d1e193bdbc8dc337f8d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa9463f9c384d1e193bdbc8dc337f8d3">&#9670;&nbsp;</a></span>update_body_wetness()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void character_funcs::update_body_wetness </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structw__point.html">w_point</a> &amp;&#160;</td>
          <td class="paramname"><em>weather</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maintains body wetness and handles the rate at which the player dries. </p>

<p class="definition">Definition at line <a class="el" href="character__turn_8cpp_source.html#l00897">897</a> of file <a class="el" href="character__turn_8cpp_source.html">character_turn.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>{</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>    <span class="comment">// Average number of turns to go from completely soaked to fully dry</span></div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>    <span class="comment">// assuming average temperature and humidity</span></div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>    <span class="keyword">constexpr</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> average_drying = 2_hours;</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span> </div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>    <span class="comment">// A modifier on drying time</span></div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>    <span class="keywordtype">double</span> delay = 1.0;</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>    <span class="comment">// Weather slows down drying</span></div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>    delay += ( ( <a class="code hl_namespace" href="namespaceweather.html">weather</a>.humidity - 66 ) - ( <a class="code hl_function" href="namespaceunits.html#a375816854bc926ebda4d9240e7d6cf64">units::to_fahrenheit</a>( <a class="code hl_namespace" href="namespaceweather.html">weather</a>.temperature ) - 65 ) ) / 100;</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>    delay = std::max( 0.1, delay );</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>    <span class="comment">// Fur/slime retains moisture</span></div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a80c61d54a8759044f6c7c841469ee11d">trait_LIGHTFUR</a> ) ||</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>        who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#aa9c71c27aec3d6c98d982792f15e613c">trait_FUR</a> ) ||</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>        who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a83afbd8e4dbefc1f99df9624fd9d7824">trait_FELINE_FUR</a> ) ||</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>        who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#aeced506658f24495d18152830064a45f">trait_LUPINE_FUR</a> ) ||</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>        who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a328aaa21f9e64c2d22a68b9764a6a550">trait_CHITIN_FUR</a> ) ||</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>        who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#afeabd53c61defabb9ba3721de6b91280">trait_CHITIN_FUR2</a> ) ||</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>        who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">trait_CHITIN_FUR3</a> ) ) {</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>        delay = delay * 6 / 5;</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>    }</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#af83add4ee97cce1fc50812e5c46f73cc">trait_URSINE_FUR</a> ) || who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a0651a103f4530a625fc7defcd7372b37">trait_SLIMY</a> ) ) {</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>        delay *= 1.5;</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>    }</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span> </div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( 1, to_turns&lt;int&gt;( average_drying * delay / 100.0 ) ) ) {</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>        <span class="comment">// No drying this turn</span></div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>    }</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span> </div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>    <span class="comment">// Now per-body-part stuff</span></div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>    <span class="comment">// To make drying uniform, make just one roll and reuse it</span></div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> drying_roll = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 80 );</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span> </div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_enumeration" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a> bp : <a class="code hl_variable" href="bodypart_8h.html#a089a199d69623f528a3883672f0a084e">all_body_parts</a> ) {</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>        <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a66520fe7648d455282596ead87701655">body_wetness</a>[bp] == 0 ) {</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>        }</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>        <span class="comment">// This is to normalize drying times</span></div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>        <span class="keywordtype">int</span> drying_chance = who.<a class="code hl_variable" href="classCharacter.html#ab7700517fb07e9155e559b3c2e427a65">drench_capacity</a>[bp];</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>        <span class="comment">// Body temperature affects duration of wetness</span></div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>        <span class="comment">// Note: Using temp_conv rather than temp_cur, to better approximate environment</span></div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>        <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a450ed42503c02c36c04faa550a5b8f70">temp_conv</a>[bp] &gt;= <a class="code hl_variable" href="weather_8h.html#a353f46362b1fd4a5eb685d5f7b271079">BODYTEMP_SCORCHING</a> ) {</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>            drying_chance *= 2;</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a450ed42503c02c36c04faa550a5b8f70">temp_conv</a>[bp] &gt;= <a class="code hl_variable" href="weather_8h.html#a8220ffde7e07de66ab06bdeba262a2c3">BODYTEMP_VERY_HOT</a> ) {</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>            drying_chance = drying_chance * 3 / 2;</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a450ed42503c02c36c04faa550a5b8f70">temp_conv</a>[bp] &gt;= <a class="code hl_variable" href="weather_8h.html#aa69b18b562ac33b8688ca8e3e95a9205">BODYTEMP_HOT</a> ) {</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>            drying_chance = drying_chance * 4 / 3;</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a450ed42503c02c36c04faa550a5b8f70">temp_conv</a>[bp] &gt; <a class="code hl_variable" href="weather_8h.html#a08fc0049be5212458556d07723095141">BODYTEMP_COLD</a> ) {</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>            <span class="comment">// Comfortable, doesn&#39;t need any changes</span></div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>            <span class="comment">// Evaporation doesn&#39;t change that much at lower temp</span></div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>            drying_chance = drying_chance * 3 / 4;</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>        }</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span> </div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>        <span class="keywordflow">if</span>( drying_chance &lt; 1 ) {</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>            drying_chance = 1;</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>        }</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span> </div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>        <span class="comment">// TODO: Make evaporation reduce body heat</span></div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>        <span class="keywordflow">if</span>( drying_chance &gt;= drying_roll ) {</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>            who.<a class="code hl_variable" href="classCharacter.html#a66520fe7648d455282596ead87701655">body_wetness</a>[bp] -= 1;</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>            <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a66520fe7648d455282596ead87701655">body_wetness</a>[bp] &lt; 0 ) {</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>                who.<a class="code hl_variable" href="classCharacter.html#a66520fe7648d455282596ead87701655">body_wetness</a>[bp] = 0;</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>            }</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>        }</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>    }</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>    <span class="comment">// TODO: Make clothing slow down drying</span></div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>}</div>
<div class="ttc" id="acharacter__turn_8cpp_html_a0651a103f4530a625fc7defcd7372b37"><div class="ttname"><a href="character__turn_8cpp.html#a0651a103f4530a625fc7defcd7372b37">trait_SLIMY</a></div><div class="ttdeci">static const trait_id trait_SLIMY(&quot;SLIMY&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a328aaa21f9e64c2d22a68b9764a6a550"><div class="ttname"><a href="character__turn_8cpp.html#a328aaa21f9e64c2d22a68b9764a6a550">trait_CHITIN_FUR</a></div><div class="ttdeci">static const trait_id trait_CHITIN_FUR(&quot;CHITIN_FUR&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a7b9b5dc5aace58de30f3602e0413cfb8"><div class="ttname"><a href="character__turn_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">trait_CHITIN_FUR3</a></div><div class="ttdeci">static const trait_id trait_CHITIN_FUR3(&quot;CHITIN_FUR3&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a80c61d54a8759044f6c7c841469ee11d"><div class="ttname"><a href="character__turn_8cpp.html#a80c61d54a8759044f6c7c841469ee11d">trait_LIGHTFUR</a></div><div class="ttdeci">static const trait_id trait_LIGHTFUR(&quot;LIGHTFUR&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a83afbd8e4dbefc1f99df9624fd9d7824"><div class="ttname"><a href="character__turn_8cpp.html#a83afbd8e4dbefc1f99df9624fd9d7824">trait_FELINE_FUR</a></div><div class="ttdeci">static const trait_id trait_FELINE_FUR(&quot;FELINE_FUR&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_aa9c71c27aec3d6c98d982792f15e613c"><div class="ttname"><a href="character__turn_8cpp.html#aa9c71c27aec3d6c98d982792f15e613c">trait_FUR</a></div><div class="ttdeci">static const trait_id trait_FUR(&quot;FUR&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_aeced506658f24495d18152830064a45f"><div class="ttname"><a href="character__turn_8cpp.html#aeced506658f24495d18152830064a45f">trait_LUPINE_FUR</a></div><div class="ttdeci">static const trait_id trait_LUPINE_FUR(&quot;LUPINE_FUR&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_af83add4ee97cce1fc50812e5c46f73cc"><div class="ttname"><a href="character__turn_8cpp.html#af83add4ee97cce1fc50812e5c46f73cc">trait_URSINE_FUR</a></div><div class="ttdeci">static const trait_id trait_URSINE_FUR(&quot;URSINE_FUR&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_afeabd53c61defabb9ba3721de6b91280"><div class="ttname"><a href="character__turn_8cpp.html#afeabd53c61defabb9ba3721de6b91280">trait_CHITIN_FUR2</a></div><div class="ttdeci">static const trait_id trait_CHITIN_FUR2(&quot;CHITIN_FUR2&quot;)</div></div>
<div class="ttc" id="aclassCharacter_html_a450ed42503c02c36c04faa550a5b8f70"><div class="ttname"><a href="classCharacter.html#a450ed42503c02c36c04faa550a5b8f70">Character::temp_conv</a></div><div class="ttdeci">std::array&lt; int, num_bp &gt; temp_conv</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02243">character.h:2243</a></div></div>
<div class="ttc" id="aclassCharacter_html_a66520fe7648d455282596ead87701655"><div class="ttname"><a href="classCharacter.html#a66520fe7648d455282596ead87701655">Character::body_wetness</a></div><div class="ttdeci">std::array&lt; int, num_bp &gt; body_wetness</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02244">character.h:2244</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab7700517fb07e9155e559b3c2e427a65"><div class="ttname"><a href="classCharacter.html#ab7700517fb07e9155e559b3c2e427a65">Character::drench_capacity</a></div><div class="ttdeci">std::array&lt; int, num_bp &gt; drench_capacity</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02245">character.h:2245</a></div></div>
<div class="ttc" id="anamespaceunits_html_a375816854bc926ebda4d9240e7d6cf64"><div class="ttname"><a href="namespaceunits.html#a375816854bc926ebda4d9240e7d6cf64">units::to_fahrenheit</a></div><div class="ttdeci">constexpr value_type to_fahrenheit(const quantity&lt; value_type, temperature_in_millidegree_celsius_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units__temperature_8h_source.html#l00124">units_temperature.h:124</a></div></div>
<div class="ttc" id="anamespaceweather_html"><div class="ttname"><a href="namespaceweather.html">weather</a></div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l01150">weather.cpp:1151</a></div></div>
<div class="ttc" id="aweather_8h_html_a08fc0049be5212458556d07723095141"><div class="ttname"><a href="weather_8h.html#a08fc0049be5212458556d07723095141">BODYTEMP_COLD</a></div><div class="ttdeci">static constexpr int BODYTEMP_COLD</div><div class="ttdoc">Do not change this value, it is an arbitrary anchor on which other calculations are made.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00034">weather.h:34</a></div></div>
<div class="ttc" id="aweather_8h_html_a353f46362b1fd4a5eb685d5f7b271079"><div class="ttname"><a href="weather_8h.html#a353f46362b1fd4a5eb685d5f7b271079">BODYTEMP_SCORCHING</a></div><div class="ttdeci">static constexpr int BODYTEMP_SCORCHING</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00042">weather.h:42</a></div></div>
<div class="ttc" id="aweather_8h_html_a8220ffde7e07de66ab06bdeba262a2c3"><div class="ttname"><a href="weather_8h.html#a8220ffde7e07de66ab06bdeba262a2c3">BODYTEMP_VERY_HOT</a></div><div class="ttdeci">static constexpr int BODYTEMP_VERY_HOT</div><div class="ttdoc">Level 3 hotness.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00040">weather.h:40</a></div></div>
<div class="ttc" id="aweather_8h_html_aa69b18b562ac33b8688ca8e3e95a9205"><div class="ttname"><a href="weather_8h.html#aa69b18b562ac33b8688ca8e3e95a9205">BODYTEMP_HOT</a></div><div class="ttdeci">static constexpr int BODYTEMP_HOT</div><div class="ttdoc">Level 2 hotness.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00038">weather.h:38</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bodypart_8h_source.html#l00082">all_body_parts</a>, <a class="el" href="character_8h_source.html#l02244">Character::body_wetness</a>, <a class="el" href="weather_8h_source.html#l00034">BODYTEMP_COLD</a>, <a class="el" href="weather_8h_source.html#l00038">BODYTEMP_HOT</a>, <a class="el" href="weather_8h_source.html#l00042">BODYTEMP_SCORCHING</a>, <a class="el" href="weather_8h_source.html#l00040">BODYTEMP_VERY_HOT</a>, <a class="el" href="character_8h_source.html#l02245">Character::drench_capacity</a>, <a class="el" href="mutation_8cpp_source.html#l00103">Character::has_trait()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="character_8h_source.html#l02243">Character::temp_conv</a>, <a class="el" href="units__temperature_8h_source.html#l00124">units::to_fahrenheit()</a>, <a class="el" href="character__turn_8cpp.html#a328aaa21f9e64c2d22a68b9764a6a550">trait_CHITIN_FUR</a>, <a class="el" href="character__turn_8cpp.html#afeabd53c61defabb9ba3721de6b91280">trait_CHITIN_FUR2</a>, <a class="el" href="character__turn_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">trait_CHITIN_FUR3</a>, <a class="el" href="character__turn_8cpp.html#a83afbd8e4dbefc1f99df9624fd9d7824">trait_FELINE_FUR</a>, <a class="el" href="character__turn_8cpp.html#aa9c71c27aec3d6c98d982792f15e613c">trait_FUR</a>, <a class="el" href="character__turn_8cpp.html#a80c61d54a8759044f6c7c841469ee11d">trait_LIGHTFUR</a>, <a class="el" href="character__turn_8cpp.html#aeced506658f24495d18152830064a45f">trait_LUPINE_FUR</a>, <a class="el" href="character__turn_8cpp.html#a0651a103f4530a625fc7defcd7372b37">trait_SLIMY</a>, <a class="el" href="character__turn_8cpp.html#af83add4ee97cce1fc50812e5c46f73cc">trait_URSINE_FUR</a>, and <a class="el" href="calendar_8cpp_source.html#l00521">x_in_y()</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l01340">game::do_turn()</a>.</p>

</div>
</div>
<a id="a641323aa837163a8a245868a5043035a" name="a641323aa837163a8a245868a5043035a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a641323aa837163a8a245868a5043035a">&#9670;&nbsp;</a></span>update_mental_focus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void character_funcs::update_mental_focus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Uses calc_focus_change to update the player's current focus. </p>

<p class="definition">Definition at line <a class="el" href="character__turn_8cpp_source.html#l01104">1104</a> of file <a class="el" href="character__turn_8cpp_source.html">character_turn.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>{</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>    who.<a class="code hl_variable" href="classCharacter.html#a1a22be593582c9aef166a12777bb79a8">focus_pool</a> += <a class="code hl_function" href="namespacecharacter__effects.html#a8cb6340e4be4183a0afdaaed94697f48">character_effects::calc_focus_change</a>( who );</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>}</div>
<div class="ttc" id="aclassCharacter_html_a1a22be593582c9aef166a12777bb79a8"><div class="ttname"><a href="classCharacter.html#a1a22be593582c9aef166a12777bb79a8">Character::focus_pool</a></div><div class="ttdeci">int focus_pool</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01567">character.h:1567</a></div></div>
<div class="ttc" id="anamespacecharacter__effects_html_a8cb6340e4be4183a0afdaaed94697f48"><div class="ttname"><a href="namespacecharacter__effects.html#a8cb6340e4be4183a0afdaaed94697f48">character_effects::calc_focus_change</a></div><div class="ttdeci">int calc_focus_change(const Character &amp;who)</div><div class="ttdoc">Calculates actual focus gain/loss value from focus equilibrium.</div><div class="ttdef"><b>Definition:</b> <a href="character__effects_8cpp_source.html#l00248">character_effects.cpp:248</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="character__effects_8cpp_source.html#l00248">character_effects::calc_focus_change()</a>, and <a class="el" href="character_8h_source.html#l01567">Character::focus_pool</a>.</p>

<p class="reference">Referenced by <a class="el" href="character__turn_8cpp_source.html#l00580">Character::reset_stats()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a4e103652bd1f087acad98fa135eca4a4" name="a4e103652bd1f087acad98fa135eca4a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e103652bd1f087acad98fa135eca4a4">&#9670;&nbsp;</a></span>FINE_VISION_PERFECT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr float character_funcs::FINE_VISION_PERFECT = 1.0f</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Value for perfect fine detail vision. </p>

<p class="definition">Definition at line <a class="el" href="character__functions_8h_source.html#l00039">39</a> of file <a class="el" href="character__functions_8h_source.html">character_functions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="avatar_8cpp_source.html#l00387">avatar::read()</a>.</p>

</div>
</div>
<a id="ac767ac632c0c783c8615f5e920cc938e" name="ac767ac632c0c783c8615f5e920cc938e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac767ac632c0c783c8615f5e920cc938e">&#9670;&nbsp;</a></span>FINE_VISION_THRESHOLD</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr float character_funcs::FINE_VISION_THRESHOLD = 4.0f</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Threshold for fine detail vision mod. </p>

<p class="definition">Definition at line <a class="el" href="character__functions_8h_source.html#l00037">37</a> of file <a class="el" href="character__functions_8h_source.html">character_functions.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="character__functions_8cpp_source.html#l00160">can_see_fine_details()</a>, and <a class="el" href="crafting_8cpp_source.html#l00131">lighting_crafting_speed_multiplier()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacecharacter__funcs.html">character_funcs</a></li>
    <li class="footer">Generated on Mon Dec 26 2022 21:42:20 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
